(function(){"use strict";const ct=async e=>{try{let t;if(!e){const o=window.location.pathname.match(/\/products\/(.*)/);if(t=o&&o[1],!t)return null}const n=window.slideruleData.storeUrl,r=n?`https://${n}/products/${e||t}.json`:`/products/${e||t}.json`,i=await(await fetch(r)).json();return i?i.product:null}catch(t){console.log(`SlideRule Analytics: product fetch failed. ${t}.`)}},de=async()=>{try{const e=window.slideruleData.storeUrl,t=e?`https://${e}/cart.json`:"/cart.json";return await(await fetch(t)).json()}catch(e){console.log(`SlideRule Analytics: cart fetch failed. ${e}`)}},En=async e=>{try{const t=window.slideruleData.storeUrl,n=t?`https://${t}/cart/update.json`:"/cart/update.json";return await(await fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)})).json()}catch(t){console.log(`SlideRule Analytics: update cart attributes failed. ${t}.`)}},vi=e=>{var t;return{...e,variants:e.variants.map(n=>({...n,price:`${n.price/100}`,price_min:`${n.price/100}`,price_max:`${n.price/100}`,compare_at_price:n.compare_at_price&&`${n.compare_at_price/100}`})),product_type:e.type,compare_at_price_varies:!1,images:(t=e.media)==null?void 0:t.map(n=>{var r;return{id:n.id,src:`https:${(r=n.preview_image)==null?void 0:r.src}`,alt:n.alt}}),image:{src:`https:${e.featured_image}`},requires_selling_plan:!1,selling_plan_groups:[],body_html:e.content}};var ut="undefined",Dn="object",Nn="any",Mn="*",fe="__",lt=typeof process!="undefined"?process:{};lt.env&&lt.env.NODE_ENV;var Q=typeof window!="undefined";lt.versions!=null&&lt.versions.node!=null,typeof Deno!="undefined"&&Deno.core,Q&&window.name==="nodejs"||typeof navigator!="undefined"&&(navigator.userAgent.includes("Node.js")||navigator.userAgent.includes("jsdom"));function Ln(e,t){return t.charAt(0)[e]()+t.slice(1)}var _i=Ln.bind(null,"toUpperCase"),bi=Ln.bind(null,"toLowerCase");function wi(e){return jn(e)?_i("null"):typeof e=="object"?Oi(e):Object.prototype.toString.call(e).slice(8,-1)}function dt(e,t){t===void 0&&(t=!0);var n=wi(e);return t?bi(n):n}function He(e,t){return typeof t===e}var ne=He.bind(null,"function"),be=He.bind(null,"string"),we=He.bind(null,"undefined"),$i=He.bind(null,"boolean");He.bind(null,"symbol");function jn(e){return e===null}function Si(e){return dt(e)==="number"&&!isNaN(e)}function Ii(e){return dt(e)==="array"}function W(e){if(!xi(e))return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function xi(e){return e&&(typeof e=="object"||e!==null)}function Oi(e){return ne(e.constructor)?e.constructor.name:null}function Ai(e){return e instanceof Error||be(e.message)&&e.constructor&&Si(e.constructor.stackTraceLimit)}function Rn(e,t){if(typeof t!="object"||jn(t))return!1;if(t instanceof e)return!0;var n=dt(new e(""));if(Ai(t))for(;t;){if(dt(t)===n)return!0;t=Object.getPrototypeOf(t)}return!1}Rn.bind(null,TypeError),Rn.bind(null,SyntaxError);function ft(e,t){var n=e instanceof Element||e instanceof HTMLDocument;return n&&t?Pi(e,t):n}function Pi(e,t){return t===void 0&&(t=""),e&&e.nodeName===t.toUpperCase()}function pt(e){var t=[].slice.call(arguments,1);return function(){return e.apply(void 0,[].slice.call(arguments).concat(t))}}pt(ft,"form"),pt(ft,"button"),pt(ft,"input"),pt(ft,"select");var Ve="global",$e=fe+"global"+fe,Se=typeof self===Dn&&self.self===self&&self||typeof global===Dn&&global.global===global&&global||void 0;function pe(e){return Se[$e][e]}function ge(e,t){return Se[$e][e]=t}function Ie(e){delete Se[$e][e]}function xe(e,t,n){var r;try{if(Ut(e)){var a=window[e];r=a[t].bind(a)}}catch{}return r||n}Se[$e]||(Se[$e]={});var gt={};function Ut(e){if(typeof gt[e]!==ut)return gt[e];try{var t=window[e];t.setItem(ut,ut),t.removeItem(ut)}catch{return gt[e]=!1}return gt[e]=!0}var We="cookie",me=Fn(),Un=mt,Ci=mt;function qn(e){return me?mt(e,"",-1):Ie(e)}function Fn(){if(me!==void 0)return me;var e="cookiecookie";try{mt(e,e),me=document.cookie.indexOf(e)!==-1,qn(e)}catch{me=!1}return me}function mt(e,t,n,r,a,i){if(typeof window!="undefined"){var o=arguments.length>1;return me===!1&&(o?ge(e,t):pe(e)),o?document.cookie=e+"="+encodeURIComponent(t)+(n?"; expires="+new Date(+new Date+1e3*n).toUTCString()+(r?"; path="+r:"")+(a?"; domain="+a:"")+(i?"; secure":""):""):decodeURIComponent((("; "+document.cookie).split("; "+e+"=")[1]||"").split(";")[0])}}var Je="localStorage",ki=Ut.bind(null,"localStorage");xe("localStorage","getItem",pe),xe("localStorage","setItem",ge),xe("localStorage","removeItem",Ie);var Xe="sessionStorage",Ti=Ut.bind(null,"sessionStorage");xe("sessionStorage","getItem",pe),xe("sessionStorage","setItem",ge),xe("sessionStorage","removeItem",Ie);function Oe(e){var t=e;try{if((t=JSON.parse(e))==="true")return!0;if(t==="false")return!1;if(W(t))return t;parseFloat(t)===t&&(t=parseFloat(t))}catch{}if(t!==null&&t!=="")return t}var Ei=ki(),Di=Ti(),Ni=Fn();function ee(e,t){if(e){var n=qt(t),r=!Bt(n),a=Ft(n)?Oe(localStorage.getItem(e)):void 0;if(r&&!we(a))return a;var i=zt(n)?Oe(Un(e)):void 0;if(r&&i)return i;var o=Gt(n)?Oe(sessionStorage.getItem(e)):void 0;if(r&&o)return o;var s=pe(e);return r?s:{localStorage:a,sessionStorage:o,cookie:i,global:s}}}function X(e,t,n){if(e&&!we(t)){var r={},a=qt(n),i=JSON.stringify(t),o=!Bt(a);return Ft(a)&&(r[Je]=yt(Je,t,Oe(localStorage.getItem(e))),localStorage.setItem(e,i),o)?r[Je]:zt(a)&&(r[We]=yt(We,t,Oe(Un(e))),Ci(e,i),o)?r[We]:Gt(a)&&(r[Xe]=yt(Xe,t,Oe(sessionStorage.getItem(e))),sessionStorage.setItem(e,i),o)?r[Xe]:(r[Ve]=yt(Ve,t,pe(e)),ge(e,t),o?r[Ve]:r)}}function Mi(e,t){if(e){var n=qt(t),r=ee(e,Mn),a={};return!we(r.localStorage)&&Ft(n)&&(localStorage.removeItem(e),a[Je]=r.localStorage),!we(r.cookie)&&zt(n)&&(qn(e),a[We]=r.cookie),!we(r.sessionStorage)&&Gt(n)&&(sessionStorage.removeItem(e),a[Xe]=r.sessionStorage),!we(r.global)&&ht(n,Ve)&&(Ie(e),a[Ve]=r.global),a}}function qt(e){return e?be(e)?e:e.storage:Nn}function Ft(e){return Ei&&ht(e,Je)}function zt(e){return Ni&&ht(e,We)}function Gt(e){return Di&&ht(e,Xe)}function Bt(e){return e===Mn||e==="all"}function ht(e,t){return e===Nn||e===t||Bt(e)}function yt(e,t,n){return{location:e,current:t,previous:n}}var Li={setItem:X,getItem:ee,removeItem:Mi},vt=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},ji=Array.isArray,te=ji;function Ri(){this.__data__=[],this.size=0}var Ui=Ri;function qi(e,t){return e===t||e!==e&&t!==t}var Kt=qi,Fi=Kt;function zi(e,t){for(var n=e.length;n--;)if(Fi(e[n][0],t))return n;return-1}var _t=zi,Gi=_t,Bi=Array.prototype,Ki=Bi.splice;function Hi(e){var t=this.__data__,n=Gi(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Ki.call(t,n,1),--this.size,!0}var Vi=Hi,Wi=_t;function Ji(e){var t=this.__data__,n=Wi(t,e);return n<0?void 0:t[n][1]}var Xi=Ji,Zi=_t;function Yi(e){return Zi(this.__data__,e)>-1}var Qi=Yi,eo=_t;function to(e,t){var n=this.__data__,r=eo(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var no=to,ro=Ui,ao=Vi,io=Xi,oo=Qi,so=no;function Ae(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ae.prototype.clear=ro,Ae.prototype.delete=ao,Ae.prototype.get=io,Ae.prototype.has=oo,Ae.prototype.set=so;var bt=Ae,co=bt;function uo(){this.__data__=new co,this.size=0}var lo=uo;function fo(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var po=fo;function go(e){return this.__data__.get(e)}var mo=go;function ho(e){return this.__data__.has(e)}var yo=ho,vo=typeof vt=="object"&&vt&&vt.Object===Object&&vt,zn=vo,_o=zn,bo=typeof self=="object"&&self&&self.Object===Object&&self,wo=_o||bo||Function("return this")(),ae=wo,$o=ae,So=$o.Symbol,wt=So,Gn=wt,Bn=Object.prototype,Io=Bn.hasOwnProperty,xo=Bn.toString,Ze=Gn?Gn.toStringTag:void 0;function Oo(e){var t=Io.call(e,Ze),n=e[Ze];try{e[Ze]=void 0;var r=!0}catch{}var a=xo.call(e);return r&&(t?e[Ze]=n:delete e[Ze]),a}var Ao=Oo,Po=Object.prototype,Co=Po.toString;function ko(e){return Co.call(e)}var To=ko,Kn=wt,Eo=Ao,Do=To,No="[object Null]",Mo="[object Undefined]",Hn=Kn?Kn.toStringTag:void 0;function Lo(e){return e==null?e===void 0?Mo:No:Hn&&Hn in Object(e)?Eo(e):Do(e)}var Ye=Lo;function jo(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Pe=jo,Ro=Ye,Uo=Pe,qo="[object AsyncFunction]",Fo="[object Function]",zo="[object GeneratorFunction]",Go="[object Proxy]";function Bo(e){if(!Uo(e))return!1;var t=Ro(e);return t==Fo||t==zo||t==qo||t==Go}var Vn=Bo,Ko=ae,Ho=Ko["__core-js_shared__"],Vo=Ho,Ht=Vo,Wn=function(){var e=/[^.]+$/.exec(Ht&&Ht.keys&&Ht.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Wo(e){return!!Wn&&Wn in e}var Jo=Wo,Xo=Function.prototype,Zo=Xo.toString;function Yo(e){if(e!=null){try{return Zo.call(e)}catch{}try{return e+""}catch{}}return""}var Jn=Yo,Qo=Vn,es=Jo,ts=Pe,ns=Jn,rs=/[\\^$.*+?()[\]{}|]/g,as=/^\[object .+?Constructor\]$/,is=Function.prototype,os=Object.prototype,ss=is.toString,cs=os.hasOwnProperty,us=RegExp("^"+ss.call(cs).replace(rs,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ls(e){if(!ts(e)||es(e))return!1;var t=Qo(e)?us:as;return t.test(ns(e))}var ds=ls;function fs(e,t){return e==null?void 0:e[t]}var ps=fs,gs=ds,ms=ps;function hs(e,t){var n=ms(e,t);return gs(n)?n:void 0}var he=hs,ys=he,vs=ae,_s=ys(vs,"Map"),Vt=_s,bs=he,ws=bs(Object,"create"),$t=ws,Xn=$t;function $s(){this.__data__=Xn?Xn(null):{},this.size=0}var Ss=$s;function Is(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xs=Is,Os=$t,As="__lodash_hash_undefined__",Ps=Object.prototype,Cs=Ps.hasOwnProperty;function ks(e){var t=this.__data__;if(Os){var n=t[e];return n===As?void 0:n}return Cs.call(t,e)?t[e]:void 0}var Ts=ks,Es=$t,Ds=Object.prototype,Ns=Ds.hasOwnProperty;function Ms(e){var t=this.__data__;return Es?t[e]!==void 0:Ns.call(t,e)}var Ls=Ms,js=$t,Rs="__lodash_hash_undefined__";function Us(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=js&&t===void 0?Rs:t,this}var qs=Us,Fs=Ss,zs=xs,Gs=Ts,Bs=Ls,Ks=qs;function Ce(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ce.prototype.clear=Fs,Ce.prototype.delete=zs,Ce.prototype.get=Gs,Ce.prototype.has=Bs,Ce.prototype.set=Ks;var Hs=Ce,Zn=Hs,Vs=bt,Ws=Vt;function Js(){this.size=0,this.__data__={hash:new Zn,map:new(Ws||Vs),string:new Zn}}var Xs=Js;function Zs(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var Ys=Zs,Qs=Ys;function ec(e,t){var n=e.__data__;return Qs(t)?n[typeof t=="string"?"string":"hash"]:n.map}var St=ec,tc=St;function nc(e){var t=tc(this,e).delete(e);return this.size-=t?1:0,t}var rc=nc,ac=St;function ic(e){return ac(this,e).get(e)}var oc=ic,sc=St;function cc(e){return sc(this,e).has(e)}var uc=cc,lc=St;function dc(e,t){var n=lc(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var fc=dc,pc=Xs,gc=rc,mc=oc,hc=uc,yc=fc;function ke(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ke.prototype.clear=pc,ke.prototype.delete=gc,ke.prototype.get=mc,ke.prototype.has=hc,ke.prototype.set=yc;var Wt=ke,vc=bt,_c=Vt,bc=Wt,wc=200;function $c(e,t){var n=this.__data__;if(n instanceof vc){var r=n.__data__;if(!_c||r.length<wc-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bc(r)}return n.set(e,t),this.size=n.size,this}var Sc=$c,Ic=bt,xc=lo,Oc=po,Ac=mo,Pc=yo,Cc=Sc;function Te(e){var t=this.__data__=new Ic(e);this.size=t.size}Te.prototype.clear=xc,Te.prototype.delete=Oc,Te.prototype.get=Ac,Te.prototype.has=Pc,Te.prototype.set=Cc;var Yn=Te,kc="__lodash_hash_undefined__";function Tc(e){return this.__data__.set(e,kc),this}var Ec=Tc;function Dc(e){return this.__data__.has(e)}var Nc=Dc,Mc=Wt,Lc=Ec,jc=Nc;function It(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Mc;++t<n;)this.add(e[t])}It.prototype.add=It.prototype.push=Lc,It.prototype.has=jc;var Qn=It;function Rc(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var Uc=Rc;function qc(e,t){return e.has(t)}var er=qc,Fc=Qn,zc=Uc,Gc=er,Bc=1,Kc=2;function Hc(e,t,n,r,a,i){var o=n&Bc,s=e.length,c=t.length;if(s!=c&&!(o&&c>s))return!1;var u=i.get(e),g=i.get(t);if(u&&g)return u==t&&g==e;var f=-1,d=!0,m=n&Kc?new Fc:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var v=e[f],y=t[f];if(r)var _=o?r(y,v,f,t,e,i):r(v,y,f,e,t,i);if(_!==void 0){if(_)continue;d=!1;break}if(m){if(!zc(t,function(w,S){if(!Gc(m,S)&&(v===w||a(v,w,n,r,i)))return m.push(S)})){d=!1;break}}else if(!(v===y||a(v,y,n,r,i))){d=!1;break}}return i.delete(e),i.delete(t),d}var tr=Hc,Vc=ae,Wc=Vc.Uint8Array,Jc=Wc;function Xc(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Zc=Xc;function Yc(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var Jt=Yc,nr=wt,rr=Jc,Qc=Kt,eu=tr,tu=Zc,nu=Jt,ru=1,au=2,iu="[object Boolean]",ou="[object Date]",su="[object Error]",cu="[object Map]",uu="[object Number]",lu="[object RegExp]",du="[object Set]",fu="[object String]",pu="[object Symbol]",gu="[object ArrayBuffer]",mu="[object DataView]",ar=nr?nr.prototype:void 0,Xt=ar?ar.valueOf:void 0;function hu(e,t,n,r,a,i,o){switch(n){case mu:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case gu:return!(e.byteLength!=t.byteLength||!i(new rr(e),new rr(t)));case iu:case ou:case uu:return Qc(+e,+t);case su:return e.name==t.name&&e.message==t.message;case lu:case fu:return e==t+"";case cu:var s=tu;case du:var c=r&ru;if(s||(s=nu),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;r|=au,o.set(e,t);var g=eu(s(e),s(t),r,a,i,o);return o.delete(e),g;case pu:if(Xt)return Xt.call(e)==Xt.call(t)}return!1}var yu=hu;function vu(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var ir=vu,_u=ir,bu=te;function wu(e,t,n){var r=t(e);return bu(e)?r:_u(r,n(e))}var or=wu;function $u(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var Su=$u;function Iu(){return[]}var sr=Iu,xu=Su,Ou=sr,Au=Object.prototype,Pu=Au.propertyIsEnumerable,cr=Object.getOwnPropertySymbols,Cu=cr?function(e){return e==null?[]:(e=Object(e),xu(cr(e),function(t){return Pu.call(e,t)}))}:Ou,ur=Cu;function ku(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Tu=ku;function Eu(e){return e!=null&&typeof e=="object"}var Qe=Eu,Du=Ye,Nu=Qe,Mu="[object Arguments]";function Lu(e){return Nu(e)&&Du(e)==Mu}var ju=Lu,lr=ju,Ru=Qe,dr=Object.prototype,Uu=dr.hasOwnProperty,qu=dr.propertyIsEnumerable,Fu=lr(function(){return arguments}())?lr:function(e){return Ru(e)&&Uu.call(e,"callee")&&!qu.call(e,"callee")},Zt=Fu,et={exports:{}};function zu(){return!1}var Gu=zu;(function(e,t){var n=ae,r=Gu,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?n.Buffer:void 0,c=s?s.isBuffer:void 0,u=c||r;e.exports=u})(et,et.exports);var Bu=9007199254740991,Ku=/^(?:0|[1-9]\d*)$/;function Hu(e,t){var n=typeof e;return t=t==null?Bu:t,!!t&&(n=="number"||n!="symbol"&&Ku.test(e))&&e>-1&&e%1==0&&e<t}var Yt=Hu,Vu=9007199254740991;function Wu(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Vu}var Qt=Wu,Ju=Ye,Xu=Qt,Zu=Qe,Yu="[object Arguments]",Qu="[object Array]",el="[object Boolean]",tl="[object Date]",nl="[object Error]",rl="[object Function]",al="[object Map]",il="[object Number]",ol="[object Object]",sl="[object RegExp]",cl="[object Set]",ul="[object String]",ll="[object WeakMap]",dl="[object ArrayBuffer]",fl="[object DataView]",pl="[object Float32Array]",gl="[object Float64Array]",ml="[object Int8Array]",hl="[object Int16Array]",yl="[object Int32Array]",vl="[object Uint8Array]",_l="[object Uint8ClampedArray]",bl="[object Uint16Array]",wl="[object Uint32Array]",j={};j[pl]=j[gl]=j[ml]=j[hl]=j[yl]=j[vl]=j[_l]=j[bl]=j[wl]=!0,j[Yu]=j[Qu]=j[dl]=j[el]=j[fl]=j[tl]=j[nl]=j[rl]=j[al]=j[il]=j[ol]=j[sl]=j[cl]=j[ul]=j[ll]=!1;function $l(e){return Zu(e)&&Xu(e.length)&&!!j[Ju(e)]}var Sl=$l;function Il(e){return function(t){return e(t)}}var xl=Il,en={exports:{}};(function(e,t){var n=zn,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,s=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(en,en.exports);var Ol=Sl,Al=xl,fr=en.exports,pr=fr&&fr.isTypedArray,Pl=pr?Al(pr):Ol,tn=Pl,Cl=Tu,kl=Zt,Tl=te,El=et.exports,Dl=Yt,Nl=tn,Ml=Object.prototype,Ll=Ml.hasOwnProperty;function jl(e,t){var n=Tl(e),r=!n&&kl(e),a=!n&&!r&&El(e),i=!n&&!r&&!a&&Nl(e),o=n||r||a||i,s=o?Cl(e.length,String):[],c=s.length;for(var u in e)(t||Ll.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Dl(u,c)))&&s.push(u);return s}var gr=jl,Rl=Object.prototype;function Ul(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Rl;return e===n}var nn=Ul;function ql(e,t){return function(n){return e(t(n))}}var mr=ql,Fl=mr,zl=Fl(Object.keys,Object),Gl=zl,Bl=nn,Kl=Gl,Hl=Object.prototype,Vl=Hl.hasOwnProperty;function Wl(e){if(!Bl(e))return Kl(e);var t=[];for(var n in Object(e))Vl.call(e,n)&&n!="constructor"&&t.push(n);return t}var hr=Wl,Jl=Vn,Xl=Qt;function Zl(e){return e!=null&&Xl(e.length)&&!Jl(e)}var Ee=Zl,Yl=gr,Ql=hr,ed=Ee;function td(e){return ed(e)?Yl(e):Ql(e)}var xt=td,nd=or,rd=ur,ad=xt;function id(e){return nd(e,ad,rd)}var od=id,yr=od,sd=1,cd=Object.prototype,ud=cd.hasOwnProperty;function ld(e,t,n,r,a,i){var o=n&sd,s=yr(e),c=s.length,u=yr(t),g=u.length;if(c!=g&&!o)return!1;for(var f=c;f--;){var d=s[f];if(!(o?d in t:ud.call(t,d)))return!1}var m=i.get(e),v=i.get(t);if(m&&v)return m==t&&v==e;var y=!0;i.set(e,t),i.set(t,e);for(var _=o;++f<c;){d=s[f];var w=e[d],S=t[d];if(r)var k=o?r(S,w,d,t,e,i):r(w,S,d,e,t,i);if(!(k===void 0?w===S||a(w,S,n,r,i):k)){y=!1;break}_||(_=d=="constructor")}if(y&&!_){var h=e.constructor,O=t.constructor;h!=O&&"constructor"in e&&"constructor"in t&&!(typeof h=="function"&&h instanceof h&&typeof O=="function"&&O instanceof O)&&(y=!1)}return i.delete(e),i.delete(t),y}var dd=ld,fd=he,pd=ae,gd=fd(pd,"DataView"),md=gd,hd=he,yd=ae,vd=hd(yd,"Promise"),_d=vd,bd=he,wd=ae,$d=bd(wd,"Set"),vr=$d,Sd=he,Id=ae,xd=Sd(Id,"WeakMap"),Od=xd,rn=md,an=Vt,on=_d,sn=vr,cn=Od,_r=Ye,De=Jn,br="[object Map]",Ad="[object Object]",wr="[object Promise]",$r="[object Set]",Sr="[object WeakMap]",Ir="[object DataView]",Pd=De(rn),Cd=De(an),kd=De(on),Td=De(sn),Ed=De(cn),ye=_r;(rn&&ye(new rn(new ArrayBuffer(1)))!=Ir||an&&ye(new an)!=br||on&&ye(on.resolve())!=wr||sn&&ye(new sn)!=$r||cn&&ye(new cn)!=Sr)&&(ye=function(e){var t=_r(e),n=t==Ad?e.constructor:void 0,r=n?De(n):"";if(r)switch(r){case Pd:return Ir;case Cd:return br;case kd:return wr;case Td:return $r;case Ed:return Sr}return t});var xr=ye,un=Yn,Dd=tr,Nd=yu,Md=dd,Or=xr,Ar=te,Pr=et.exports,Ld=tn,jd=1,Cr="[object Arguments]",kr="[object Array]",Ot="[object Object]",Rd=Object.prototype,Tr=Rd.hasOwnProperty;function Ud(e,t,n,r,a,i){var o=Ar(e),s=Ar(t),c=o?kr:Or(e),u=s?kr:Or(t);c=c==Cr?Ot:c,u=u==Cr?Ot:u;var g=c==Ot,f=u==Ot,d=c==u;if(d&&Pr(e)){if(!Pr(t))return!1;o=!0,g=!1}if(d&&!g)return i||(i=new un),o||Ld(e)?Dd(e,t,n,r,a,i):Nd(e,t,c,n,r,a,i);if(!(n&jd)){var m=g&&Tr.call(e,"__wrapped__"),v=f&&Tr.call(t,"__wrapped__");if(m||v){var y=m?e.value():e,_=v?t.value():t;return i||(i=new un),a(y,_,n,r,i)}}return d?(i||(i=new un),Md(e,t,n,r,a,i)):!1}var qd=Ud,Fd=qd,Er=Qe;function Dr(e,t,n,r,a){return e===t?!0:e==null||t==null||!Er(e)&&!Er(t)?e!==e&&t!==t:Fd(e,t,n,r,Dr,a)}var Nr=Dr,zd=function(t){return t===void 0&&(t={}),{arrayFormat:t.arrayFormat||"none",booleanFormat:t.booleanFormat||"none",nullFormat:t.nullFormat||"default"}},Mr=function(t){return decodeURIComponent(t.replace(/\+/g," "))},Gd=function(t,n){if(t===void 0)return n.booleanFormat==="empty-true"?!0:null;if(n.booleanFormat==="string"){if(t==="true")return!0;if(t==="false")return!1}if(n.nullFormat==="string"&&t==="null")return null;var r=Mr(t);if(n.booleanFormat==="unicode"){if(r==="\u2713")return!0;if(r==="\u2717")return!1}return r},Bd=function(t){var n=t.indexOf("?");return n===-1?t:t.slice(n+1)},Kd=function(t){var n=t.indexOf("["),r=n!==-1;return{hasBrackets:r,name:r?t.slice(0,n):t}},Ne=function(t,n){var r=zd(n);return Bd(t).split("&").reduce(function(a,i){var o=i.split("="),s=o[0],c=o[1],u=Kd(s),g=u.hasBrackets,f=u.name,d=Mr(f),m=a[f],v=Gd(c,r);return m===void 0?a[d]=g?[v]:v:a[d]=(Array.isArray(m)?m:[m]).concat(v),a},{})},Hd=Yn,Vd=Nr,Wd=1,Jd=2;function Xd(e,t,n,r){var a=n.length,i=a,o=!r;if(e==null)return!i;for(e=Object(e);a--;){var s=n[a];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++a<i;){s=n[a];var c=s[0],u=e[c],g=s[1];if(o&&s[2]){if(u===void 0&&!(c in e))return!1}else{var f=new Hd;if(r)var d=r(u,g,c,e,t,f);if(!(d===void 0?Vd(g,u,Wd|Jd,r,f):d))return!1}}return!0}var Zd=Xd,Yd=Pe;function Qd(e){return e===e&&!Yd(e)}var Lr=Qd,ef=Lr,tf=xt;function nf(e){for(var t=tf(e),n=t.length;n--;){var r=t[n],a=e[r];t[n]=[r,a,ef(a)]}return t}var rf=nf;function af(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var jr=af,of=Zd,sf=rf,cf=jr;function uf(e){var t=sf(e);return t.length==1&&t[0][2]?cf(t[0][0],t[0][1]):function(n){return n===e||of(n,e,t)}}var lf=uf,df=Ye,ff=Qe,pf="[object Symbol]";function gf(e){return typeof e=="symbol"||ff(e)&&df(e)==pf}var At=gf,mf=te,hf=At,yf=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vf=/^\w*$/;function _f(e,t){if(mf(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||hf(e)?!0:vf.test(e)||!yf.test(e)||t!=null&&e in Object(t)}var ln=_f,Rr=Wt,bf="Expected a function";function dn(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(bf);var n=function(){var r=arguments,a=t?t.apply(this,r):r[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,r);return n.cache=i.set(a,o)||i,o};return n.cache=new(dn.Cache||Rr),n}dn.Cache=Rr;var wf=dn,$f=wf,Sf=500;function If(e){var t=$f(e,function(r){return n.size===Sf&&n.clear(),r}),n=t.cache;return t}var xf=If,Of=xf,Af=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pf=/\\(\\)?/g,Cf=Of(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Af,function(n,r,a,i){t.push(a?i.replace(Pf,"$1"):r||n)}),t}),kf=Cf;function Tf(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var fn=Tf,Ur=wt,Ef=fn,Df=te,Nf=At,Mf=1/0,qr=Ur?Ur.prototype:void 0,Fr=qr?qr.toString:void 0;function zr(e){if(typeof e=="string")return e;if(Df(e))return Ef(e,zr)+"";if(Nf(e))return Fr?Fr.call(e):"";var t=e+"";return t=="0"&&1/e==-Mf?"-0":t}var Lf=zr,jf=Lf;function Rf(e){return e==null?"":jf(e)}var pn=Rf,Uf=te,qf=ln,Ff=kf,zf=pn;function Gf(e,t){return Uf(e)?e:qf(e,t)?[e]:Ff(zf(e))}var Pt=Gf,Bf=At,Kf=1/0;function Hf(e){if(typeof e=="string"||Bf(e))return e;var t=e+"";return t=="0"&&1/e==-Kf?"-0":t}var tt=Hf,Vf=Pt,Wf=tt;function Jf(e,t){t=Vf(t,e);for(var n=0,r=t.length;e!=null&&n<r;)e=e[Wf(t[n++])];return n&&n==r?e:void 0}var gn=Jf,Xf=gn;function Zf(e,t,n){var r=e==null?void 0:Xf(e,t);return r===void 0?n:r}var F=Zf;function Yf(e,t){return e!=null&&t in Object(e)}var Qf=Yf,ep=Pt,tp=Zt,np=te,rp=Yt,ap=Qt,ip=tt;function op(e,t,n){t=ep(t,e);for(var r=-1,a=t.length,i=!1;++r<a;){var o=ip(t[r]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++r!=a?i:(a=e==null?0:e.length,!!a&&ap(a)&&rp(o,a)&&(np(e)||tp(e)))}var sp=op,cp=Qf,up=sp;function lp(e,t){return e!=null&&up(e,t,cp)}var dp=lp,fp=Nr,pp=F,gp=dp,mp=ln,hp=Lr,yp=jr,vp=tt,_p=1,bp=2;function wp(e,t){return mp(e)&&hp(t)?yp(vp(e),t):function(n){var r=pp(n,e);return r===void 0&&r===t?gp(n,e):fp(t,r,_p|bp)}}var $p=wp;function Sp(e){return e}var Ip=Sp;function xp(e){return function(t){return t==null?void 0:t[e]}}var Op=xp,Ap=gn;function Pp(e){return function(t){return Ap(t,e)}}var Cp=Pp,kp=Op,Tp=Cp,Ep=ln,Dp=tt;function Np(e){return Ep(e)?kp(Dp(e)):Tp(e)}var Mp=Np,Lp=lf,jp=$p,Rp=Ip,Up=te,qp=Mp;function Fp(e){return typeof e=="function"?e:e==null?Rp:typeof e=="object"?Up(e)?jp(e[0],e[1]):Lp(e):qp(e)}var Me=Fp,zp=Me,Gp=Ee,Bp=xt;function Kp(e){return function(t,n,r){var a=Object(t);if(!Gp(t)){var i=zp(n);t=Bp(t),n=function(s){return i(a[s],s,a)}}var o=e(t,n,r);return o>-1?a[i?t[o]:o]:void 0}}var Hp=Kp;function Vp(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Gr=Vp,Wp=/\s/;function Jp(e){for(var t=e.length;t--&&Wp.test(e.charAt(t)););return t}var Xp=Jp,Zp=Xp,Yp=/^\s+/;function Qp(e){return e&&e.slice(0,Zp(e)+1).replace(Yp,"")}var eg=Qp,tg=eg,Br=Pe,ng=At,Kr=0/0,rg=/^[-+]0x[0-9a-f]+$/i,ag=/^0b[01]+$/i,ig=/^0o[0-7]+$/i,og=parseInt;function sg(e){if(typeof e=="number")return e;if(ng(e))return Kr;if(Br(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Br(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=tg(e);var n=ag.test(e);return n||ig.test(e)?og(e.slice(2),n?2:8):rg.test(e)?Kr:+e}var cg=sg,ug=cg,Hr=1/0,lg=17976931348623157e292;function dg(e){if(!e)return e===0?e:0;if(e=ug(e),e===Hr||e===-Hr){var t=e<0?-1:1;return t*lg}return e===e?e:0}var fg=dg,pg=fg;function gg(e){var t=pg(e),n=t%1;return t===t?n?t-n:t:0}var mg=gg,hg=Gr,yg=Me,vg=mg,_g=Math.max;function bg(e,t,n){var r=e==null?0:e.length;if(!r)return-1;var a=n==null?0:vg(n);return a<0&&(a=_g(r+a,0)),hg(e,yg(t),a)}var wg=bg,$g=Hp,Sg=wg,Ig=$g(Sg),Ct=Ig;function xg(e,t,n,r){var a=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}var Og=xg;function Ag(e){return function(t){return e==null?void 0:e[t]}}var Pg=Ag,Cg=Pg,kg={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Tg=Cg(kg),Eg=Tg,Dg=Eg,Ng=pn,Mg=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Lg="\\u0300-\\u036f",jg="\\ufe20-\\ufe2f",Rg="\\u20d0-\\u20ff",Ug=Lg+jg+Rg,qg="["+Ug+"]",Fg=RegExp(qg,"g");function zg(e){return e=Ng(e),e&&e.replace(Mg,Dg).replace(Fg,"")}var Gg=zg,Bg=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Kg(e){return e.match(Bg)||[]}var Hg=Kg,Vg=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Wg(e){return Vg.test(e)}var Jg=Wg,Vr="\\ud800-\\udfff",Xg="\\u0300-\\u036f",Zg="\\ufe20-\\ufe2f",Yg="\\u20d0-\\u20ff",Qg=Xg+Zg+Yg,Wr="\\u2700-\\u27bf",Jr="a-z\\xdf-\\xf6\\xf8-\\xff",em="\\xac\\xb1\\xd7\\xf7",tm="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",nm="\\u2000-\\u206f",rm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Xr="A-Z\\xc0-\\xd6\\xd8-\\xde",am="\\ufe0e\\ufe0f",Zr=em+tm+nm+rm,Yr="['\u2019]",Qr="["+Zr+"]",im="["+Qg+"]",ea="\\d+",om="["+Wr+"]",ta="["+Jr+"]",na="[^"+Vr+Zr+ea+Wr+Jr+Xr+"]",sm="\\ud83c[\\udffb-\\udfff]",cm="(?:"+im+"|"+sm+")",um="[^"+Vr+"]",ra="(?:\\ud83c[\\udde6-\\uddff]){2}",aa="[\\ud800-\\udbff][\\udc00-\\udfff]",Le="["+Xr+"]",lm="\\u200d",ia="(?:"+ta+"|"+na+")",dm="(?:"+Le+"|"+na+")",oa="(?:"+Yr+"(?:d|ll|m|re|s|t|ve))?",sa="(?:"+Yr+"(?:D|LL|M|RE|S|T|VE))?",ca=cm+"?",ua="["+am+"]?",fm="(?:"+lm+"(?:"+[um,ra,aa].join("|")+")"+ua+ca+")*",pm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",gm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",mm=ua+ca+fm,hm="(?:"+[om,ra,aa].join("|")+")"+mm,ym=RegExp([Le+"?"+ta+"+"+oa+"(?="+[Qr,Le,"$"].join("|")+")",dm+"+"+sa+"(?="+[Qr,Le+ia,"$"].join("|")+")",Le+"?"+ia+"+"+oa,Le+"+"+sa,gm,pm,ea,hm].join("|"),"g");function vm(e){return e.match(ym)||[]}var _m=vm,bm=Hg,wm=Jg,$m=pn,Sm=_m;function Im(e,t,n){return e=$m(e),t=n?void 0:t,t===void 0?wm(e)?Sm(e):bm(e):e.match(t)||[]}var xm=Im,Om=Og,Am=Gg,Pm=xm,Cm="['\u2019]",km=RegExp(Cm,"g");function Tm(e){return function(t){return Om(Pm(Am(t).replace(km,"")),e,"")}}var Em=Tm,Dm=Em,Nm=Dm(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),je=Nm;const nt=(e,t,n=1)=>{const{title:r,product_type:a,vendor:i,id:o,variants:s}=e,c=t?Ct(s,{id:t}):s[0],{price:u,sku:g,title:f,id:d}=c;return{item_id:d,item_name:r,affiliation:"Shopify Store",currency:la(),item_brand:i,item_category:a,item_variant:f,item_product_id:o,price:Number(u),quantity:n,sku:g}};async function Re(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return[...new Uint8Array(n)].map(a=>a.toString(16).padStart(2,"0")).join("")}function Mm(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++a];if(n(i[c],c,i)===!1)break}return t}}var Lm=Mm,jm=Lm,Rm=jm(),Um=Rm,qm=Um,Fm=xt;function zm(e,t){return e&&qm(e,t,Fm)}var Gm=zm,Bm=mr,Km=Bm(Object.getPrototypeOf,Object),Hm=Km;const la=()=>{var e,t,n,r;return((t=(e=window==null?void 0:window.Shopify)==null?void 0:e.currency)==null?void 0:t.active)||((r=(n=window.slideruleData)==null?void 0:n.ecommerce)==null?void 0:r.currencyCode)},$=(e,t)=>{t&&console.log(`SlideRule Analytics: ${e}`)},mn=async(e,t,n)=>{const r=await ct(t.handle),a=nt(r,t.id,t.quantity),i=e==="remove_from_cart"?-1:1;return window.slideruleData.analytics.track(e,{ecommerce_event:!0,currency:a.currency,value:i*a.price*t.quantity,items:[a],cart_token:n}),r},da=async()=>{const e=await de();return window.slideruleData.cart=e,e},kt=(e,t,n)=>{var r="";if(n){var a=new Date;a.setTime(a.getTime()+n*24*60*60*1e3),r="; expires="+a.toUTCString()}document.cookie=e+"="+(t||"")+r+"; path=/"},Ue=e=>{for(var t=e+"=",r=decodeURIComponent(document.cookie).split(";"),a,i=0;i<r.length;i++){for(var o=r[i];o.charAt(0)==" ";)o=o.substring(1,o.length);o.indexOf(t)==0&&(a=o.substring(t.length,o.length))}return a},Vm=e=>{document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"},Wm=(e,t)=>(e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e)+e)),Jm=async()=>{try{const e=Ue("_sra_ip");if(e)return e;let n=await(await fetch("https://www.cloudflare.com/cdn-cgi/trace")).text();return n=n.trim().split(`
`).reduce(function(r,a){return a=a.split("="),r[a[0]]=a[1],r},{}),kt("_sra_ip",n.ip,.0208333),n.ip}catch(e){console.log(`SlideRule Analytics: get ip address failed. ${e}`)}},fa=(e,t)=>{X(e,t,{storage:"localStorage"}),X(e,t,{storage:"cookie"}),X(e,t,{storage:"sessionStorage"}),X(e,t,{storage:"global"})},hn=(e,t)=>{let n=Ne(window.location.href)[e];return n?fa(t,n):n=ee(t),n},Xm=e=>{const t=Ne(e).variant;return t?Number(t):void 0},yn=async(e,t=[],n=!1)=>{const r=["email","phone_number","first_name","last_name","name","default_address","addresses_count","current_location","addresses","address","address1","address2","ip_address","phone"];n||r.push("email_sha256","phone_sha256");const a=[...r,...t],i={},o=[];for(const s in e)if(a.includes(s)){if(n){const c=e[s],u=Re(c).then(g=>{i[`${s}_sha256`]=g});o.push(u)}}else i[s]=e[s];return await Promise.all(o),i},vn=["klaviyo_meta_data"],pa=(e,t)=>{const n={data_action_tracking:!0};t.forEach(a=>{const i=a==="innerText"?e.innerText:e.getAttribute(a);i&&i!==""&&(a==="href"&&(n.url=i.toLowerCase().trim()),a==="innerText"?n.text=i.toLowerCase().trim():n[je(a)]=i)});const r=e.dataset;for(const a in r){const i=r[a];i!==""&&(n[je(a)]=i.toLowerCase().trim())}return n},ga=e=>{const{eventName:t,object:n,action:r}=e;return je(t?t.trim():n?`${n} ${r}`.trim():r.trim())},Zm=e=>{const t=e.currentTarget,r=pa(t,["class","id","src","value","role","target","href","innerText"]),a=ga(r);window.slideruleData.analytics.track(a,r)},Ym=(e,t)=>{e.forEach(n=>{if(n.isIntersecting){const r=n.target,i=pa(r,["class","id","src","role","href","innerText"]),o=ga(i);window.slideruleData.analytics.track(o,i),t.unobserve(r)}})},Qm=(e,t,n)=>{const r=document.querySelectorAll(e),a=new IntersectionObserver(n,t);r.forEach(i=>{a.observe(i)})},eh=()=>{try{document.querySelectorAll('[data-action="click"]').forEach(n=>{n.addEventListener("click",Zm)})}catch(t){t.message!=="noElements"?console.error("SlideRule: data action listener error:",t):console.log("SlideRule: no elements with data-action=click found")}Qm('[data-action="view"]',{root:null,rootMargin:"0px",threshold:.5},Ym)};let _n={};const ma="https://www.googletagmanager.com/gtag/js",ha={debug_mode:!1,send_page_view:!1,anonymize_ip:!1,allow_google_signals:!0,allow_ad_personalization_signals:!0,cookie_flags:""},th={gtagName:"gtag",dataLayerName:"dataLayer",measurementIds:[],gtagConfig:ha,parametersToStrip:!1,initalizedManually:!1};function nh(e={}){let t=0,n=bn(e.measurementIds);const r={...th,...e};return{name:"google-analytics",config:r,initialize:({config:a,instance:i})=>{const{dataLayerName:o,customScriptSrc:s,gtagName:c,gtagConfig:u,debug:g,parametersToStrip:f,initialTraits:d,initalizedManually:m}=a;if(m===!0)return;const v=o?`&l=${o}`:"",y=s||`${ma}?id=${n[0]}${v}`;if(!ya(y)){const S=document.createElement("script");S.async=!0,S.src=y,document.body.appendChild(S)}window[o]||(window[o]=window[o]||[]),window[c]||(window[c]=function(){window[o].push(arguments)}),window[c]("js",new Date);let _={...ha,...u||{}};g===!0?_.debug_mode=!0:delete _.debug_mode,Object.keys(d).length&&window[c]("set","user_properties",d),f&&(_.page_location=va(document.location,f),_.original_query_params=document.location.search);for(var w=0;w<n.length;w++)_n[n[w]]||(window[c]("config",n[w],_),_n[n[w]]=!0)},identify:({payload:a,config:i})=>{const{gtagName:o,dataLayerName:s}=i;if(!(!window[o]||!n.length)&&(a.userId&&window[o]("set",{user_id:a.userId}),Object.keys(a.traits).length))for(var c=0;c<n.length;c++)window[o]("config",n[c],{user_properties:a.traits}),_n[n[c]]=!0,window[s]=window[s]||[],window[o]=function(){window[s].push(arguments)},window[o]("js",new Date),wn(n,o,"identify",{user_properties:a.traits})},page:({payload:a,config:i,instance:o})=>{const{gtagName:s,gtagConfig:c,parametersToStrip:u}=i;if(!window[s]||!n.length)return;const{properties:g}=a,{send_to:f}=g,d={page_title:g.title,page_location:u?va(g.url,u):g.url,page_path:g.path||document.location.pathname,page_hash:g.hash,page_search:g.search,page_referrer:g.referrer,original_query_params:document.location.search},m={...f?{send_to:f}:{},...g,...d};if(c&&c.send_page_view&&t===0){t++;return}wn(n,s,"page_view",m),t++},track:({payload:a,config:i,instance:o})=>{const{properties:s,event:c}=a,u=o.getState("context.campaign"),{gtagName:g,dataLayerName:f}=i;if(!window[g]||!n.length)return;const d=rh(u),m={...s,...d};window[f]=window[f]||[],window[g]=function(){window[f].push(arguments)},window[g]("js",new Date),wn(n,g,c,m)},loaded:()=>{const{dataLayerName:a,customScriptSrc:i}=r,o=a&&window[a]&&window[a].length>0;return ya(i||ma)&&o},methods:{addTag(a,i={}){window[r.gtagName]&&(window[r.gtagName]("config",a,i),n&&!n.includes(a)&&(n=n.concat(a)))},disable:a=>{const i=a?bn(a):n;for(var o=0;o<n.length;o++){const s=n[o];i.includes(s)&&(window[`ga-disable-${s}`]=!0)}},enable:a=>{const i=a?bn(a):n;for(var o=0;o<n.length;o++){const s=n[o];i.includes(s)&&(window[`ga-disable-${s}`]=!1)}}}}}function bn(e){if(!e)throw new Error("No GA Measurement ID defined");if(Array.isArray(e))return e;if(typeof e=="string")return[e];throw new Error("GA Measurement ID must be string or array of strings")}function rh(e={}){let t={};const{id:n,name:r,source:a,medium:i,content:o,keyword:s}=e;return n&&(t.campaignId=n),r&&(t.campaignName=r),a&&(t.campaignSource=a),i&&(t.campaignMedium=i),o&&(t.campaignContent=o),s&&(t.campaignKeyword=s),t}function ya(e){const t=document.querySelectorAll("script[src]"),n=new RegExp(`^${e}`);return Boolean(Object.values(t).filter(r=>n.test(r.src)).length)}const va=(e,t)=>{const n=new URL(e),r=n.searchParams;return t.forEach(a=>{r.delete(a)}),n.search=r.toString(),n.toString()},wn=(e,t,n,r)=>{for(var a=0;a<e.length;a++)window[t]("event",n,{...r,send_to:e[a]})},_a={name:"format-google-analytics","track:google-analytics":async({payload:e,plugins:t})=>{const n=t["google-analytics"].config,{encryptePII:r}=n,{event:a,properties:i}=e,o=await yn(i,vn,r);return Object.assign({},e,{event:a,properties:o})},"initialize:google-analytics":async({payload:e,plugins:t,instance:n})=>{const r=t["google-analytics"].config,{encryptePII:a}=r,i=n.user()||{},o=i.traits||{},s=await yn(o,vn,a);return s.anonymous_id=i.anonymousId,delete s.anonymousId,delete s.ecommerce_event,delete s.category,delete s.id,t["google-analytics"].config.initialTraits=s,{payload:e,plugins:t}},"identify:google-analytics":async({payload:e,plugins:t})=>{const n=t["google-analytics"].config,{encryptePII:r}=n,{traits:a}=e,i=await yn(a,vn,r);return Object.assign({},e,{traits:i})}},ah=["fbclid","nb_aaeid","nb_adid","nb_adsetid","nb_adtype","nb_adv","nb_advertiser_id","nb_advli","nb_adxid","nb_adxtype","nb_ageid","nb_agid","nb_aid","nb_aname","nb_androidid","nb_ap","nb_app_name","nb_app_version","nb_asize","nb_atype","nb_bid","nb_bmt","nb_bundle_id","nb_caid","nb_campaignid","nb_ceid","nb_channel_type","nb_cid","nb_ciid","nb_clid","nb_cname","nb_cpc","nb_creative","nb_creative_height","nb_creative_id","nb_creative_name","nb_creative_type","nb_creative_width","nb_creativetype","nb_crid","nb_ct","nb_cturle","nb_d","nb_day_of_week","nb_device","nb_device_id","nb_device_model","nb_device_os","nb_deviceid","nb_did","nb_docid","nb_domain","nb_dt","nb_fii","nb_gdpr","nb_gdpra","nb_gdprconsent","nb_geo_city","nb_geo_country","nb_geo_dma","nb_geo_postal","nb_geo_state","nb_heig","nb_iabusp","nb_idfa","nb_idfa_md5","nb_idfa_sha","nb_igu","nb_imp_height","nb_imp_width","nb_klid","nb_kwd","nb_lat","nb_li_ms","nb_liid","nb_line_item_id","nb_long","nb_lp_ms","nb_mi","nb_mid","nb_month","nb_mt","nb_mtype","nb_n","nb_network","nb_offer","nb_oid","nb_oii","nb_os","nb_partner_name","nb_partner_shared_id","nb_pc","nb_pi","nb_pid","nb_placement","nb_placement_id","nb_platform","nb_plinkid","nb_pn","nb_ppgid","nb_ppi","nb_ppid","nb_product_sku","nb_pubid","nb_publisher","nb_publisher_name","nb_qs","nb_rand","nb_ref_domain","nb_ref_id","nb_ref_page","nb_reqid","nb_sa_do_not_track","nb_secid","nb_sid","nb_sn","nb_source_id","nb_store_url","nb_sub_advertiser_id","nb_subid","nb_ti","nb_tid","nb_tn","nb_tt","nb_ttu","nb_twitchu","nb_twtru","nb_wid","nb_widt","nb_ytu","nbt"],ih=()=>{var a,i;const e={consentManagement:"customer-privacy-banner",dataActionTracking:!0,disableCartAttributes:!1,avoidRaceWithLittelData:!1,initalizeGA4Manually:!1,skipATCIdentifiersUpdate:!0,usePageUrlsForEvents:!1,skipInitialPageview:!1,saveLandingPageUrlParamsToCart:!1},t=(a=window==null?void 0:window.slideruleData)==null?void 0:a.configurationOptions,n={...e,...t},r=(i=window==null?void 0:window.Shopify)==null?void 0:i.shop;return(r==="gipfelstuck.myshopify.com"||r==="indoor-outdoors.myshopify.com"||r==="industrial-tech-store-uk.myshopify.com"||r==="harrys-1982.myshopify.com"||r==="goodson-tools-supplies.myshopify.com"||r==="abrasive-industries.myshopify.com"||r==="airestech.myshopify.com"||r==="siksilk-com.myshopify.com"||r==="siksilk-us.myshopify.com"||r==="siksilkusa.myshopify.com"||r==="siksilk-esp.myshopify.com"||r==="siksilk-fr.myshopify.com"||r==="siksilk-de.myshopify.com"||r==="siksilk-ie.myshopify.com"||r==="siksilk-it.myshopify.com"||r==="siksilk-nl.myshopify.com"||r==="siksilk-pt.myshopify.com"||r==="siksilk-cl.myshopify.com"||r==="multipower-4585.myshopify.com"||r==="multaben.myshopify.com"||r==="siobeauty.myshopify.com"||r==="hydrangea-com.myshopify.com"||r==="exo-mountain-gear.myshopify.com"||r==="tasteireland.myshopify.com"||r==="happyhairbrush.myshopify.com"||r==="wholesale-elite.myshopify.com"||r==="al-ive-body.myshopify.com"||r=="shrimpy-business.myshopify.com"||r=="dazzle-by-sarah.myshopify.com"||r=="swp2018.myshopify.com"||r=="babadoh.myshopify.com"||r=="carlitos-handmade-de.myshopify.com"||r=="bennett-winch.myshopify.com"||r=="spiritpieces.myshopify.com"||r=="eternity-collars.myshopify.com"||r=="liam-avery.myshopify.com"||r=="b14027.myshopify.com"||r=="beekeepinguk.myshopify.com"||r=="beevive.myshopify.com"||r=="smittenknits.myshopify.com"||r=="sourced-by-holly-rhwd.myshopify.com"||r=="welovecushions-rhwd.myshopify.com"||r=="adored-illustrations.myshopify.com"||r=="oti-marn.myshopify.com"||r=="blazers-fan-club.myshopify.com"||r=="tillamook-shop.myshopify.com")&&(n.disableCartAttributes=!0),(r==="airestech.myshopify.com"||r==="siobeauty.myshopify.com")&&(n.avoidRaceWithLittelData=!0),r==="gipfelstuck.myshopify.com"||r==="never-fully-dressed.myshopify.com"?n.consentManagement="gdpr-backpack":(r==="slideruleanalytics-demo.myshopify.com"||r==="huuta.myshopify.com"||r==="rare-tea-usa.myshopify.com")&&(n.consentManagement="customer-privacy-banner"),r==="ha2017.myshopify.com"&&(n.usePageUrlsForEvents=!0),n},oh={debug:!1,containerId:null,dataLayerName:"dataLayer",dataLayer:void 0,preview:void 0,auth:void 0,execution:"async"};let Tt;function ba(e={}){return{name:"google-tag-manager",config:{...oh,...e},initialize:({config:t})=>{const{containerId:n,dataLayerName:r,customScriptSrc:a,preview:i,auth:o,execution:s}=t;if(!n)throw new Error("No google tag manager containerId defined");if(i&&!o)throw new Error("When enabling preview mode, both preview and auth parameters must be defined");const c=a||"https://www.googletagmanager.com/gtm.js";$a(n)||(function(u,g,f,d,m){u[d]=u[d]||[],u[d].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var v=g.getElementsByTagName(f)[0],y=g.createElement(f),_=d!="dataLayer"?"&l="+d:"",w=i?"&gtm_preview="+i+"&gtm_auth="+o+"&gtm_cookies_win=x":"";s&&(y[s]=!0),y.src=`${c}?id=`+m+_+w,v.parentNode.insertBefore(y,v)}(window,document,"script",r,n),Tt=r,t.dataLayer=window[r])},page:({payload:t,options:n,instance:r,config:a})=>{typeof a.dataLayer!="undefined"&&(a.dataLayer.push(t.properties),a.dataLayer.push({fired_from:void 0}))},identify:({payload:t,config:n})=>{if(typeof n.dataLayer!="undefined"){const{anonymousId:r,userId:a,traits:i}=t,o=i;a&&(o.userId=a),r&&(o.anonymousId=r),n.dataLayer.push({event:"identify",...o}),n.dataLayer.push({fired_from:void 0})}},track:({payload:t,options:n,config:r})=>{if(typeof r.dataLayer!="undefined"){const{anonymousId:a,userId:i,properties:o}=t,s=o;i&&(s.userId=i),a&&(s.anonymousId=a),o.category||(s.category="All"),r.debug&&console.log("gtag push",{event:t.event,...s}),r.dataLayer.push({event:t.event,...s}),r.dataLayer.push({fired_from:null,ecommerce:null,ecommerce_event:null})}},loaded:()=>{const t=!!Tt&&!!(window[Tt]&&Array.prototype.push!==window[Tt].push);return $a(e.containerId)&&t}}}const wa={};function $a(e){let t=wa[e];t||(t=new RegExp("googletagmanager\\.com\\/gtm\\.js.*[?&]id="+e),wa[e]=t);const n=document.querySelectorAll("script[src]");return!!Object.keys(n).filter(r=>(n[r].src||"").match(t)).length}function sh(e){return e==null}var ve=sh,ch="Expected a function";function uh(e){if(typeof e!="function")throw new TypeError(ch);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}var lh=uh,dh=he,fh=function(){try{var e=dh(Object,"defineProperty");return e({},"",{}),e}catch{}}(),ph=fh,Sa=ph;function gh(e,t,n){t=="__proto__"&&Sa?Sa(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var mh=gh,hh=mh,yh=Kt,vh=Object.prototype,_h=vh.hasOwnProperty;function bh(e,t,n){var r=e[t];(!(_h.call(e,t)&&yh(r,n))||n===void 0&&!(t in e))&&hh(e,t,n)}var wh=bh,$h=wh,Sh=Pt,Ih=Yt,Ia=Pe,xh=tt;function Oh(e,t,n,r){if(!Ia(e))return e;t=Sh(t,e);for(var a=-1,i=t.length,o=i-1,s=e;s!=null&&++a<i;){var c=xh(t[a]),u=n;if(c==="__proto__"||c==="constructor"||c==="prototype")return e;if(a!=o){var g=s[c];u=r?r(g,c,s):void 0,u===void 0&&(u=Ia(g)?g:Ih(t[a+1])?[]:{})}$h(s,c,u),s=s[c]}return e}var Ah=Oh,Ph=gn,Ch=Ah,kh=Pt;function Th(e,t,n){for(var r=-1,a=t.length,i={};++r<a;){var o=t[r],s=Ph(e,o);n(s,o)&&Ch(i,kh(o,e),s)}return i}var Eh=Th,Dh=ir,Nh=Hm,Mh=ur,Lh=sr,jh=Object.getOwnPropertySymbols,Rh=jh?function(e){for(var t=[];e;)Dh(t,Mh(e)),e=Nh(e);return t}:Lh,Uh=Rh;function qh(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Fh=qh,zh=Pe,Gh=nn,Bh=Fh,Kh=Object.prototype,Hh=Kh.hasOwnProperty;function Vh(e){if(!zh(e))return Bh(e);var t=Gh(e),n=[];for(var r in e)r=="constructor"&&(t||!Hh.call(e,r))||n.push(r);return n}var Wh=Vh,Jh=gr,Xh=Wh,Zh=Ee;function Yh(e){return Zh(e)?Jh(e,!0):Xh(e)}var Qh=Yh,ey=or,ty=Uh,ny=Qh;function ry(e){return ey(e,ny,ty)}var ay=ry,iy=fn,oy=Me,sy=Eh,cy=ay;function uy(e,t){if(e==null)return{};var n=iy(cy(e),function(r){return[r]});return t=oy(t),sy(e,n,function(r,a){return t(r,a[0])})}var ly=uy,dy=Me,fy=lh,py=ly;function gy(e,t){return py(e,fy(dy(t)))}var se=gy;const xa=["transaction_id","order_number","order_name","customer_id","currency","coupon","payment_type","shipping","shipping_tier","value","tax","item_list_id","item_list_name","items"],my=e=>{if(typeof e.dataLayer!="undefined"){const t={ecommerce:null};e.debug&&console.log("gtag push",t),e.dataLayer.push(t)}},Oa={name:"format-google-tag-manager","track:google-tag-manager":async({payload:e,plugins:t})=>{var a;const n=t["google-tag-manager"].config;let r=Object.assign({},e.properties,{});return my(n),r.ecommerce_event?r=se({ecommerce:Object.fromEntries(Object.entries(e.properties).filter(([i])=>xa.includes(i))),ecommerce_event:!0,fired_from:"SlideRule Analytics",...se(r,(i,o)=>xa.includes(o))},ve):(r.ecommerce_event=!1,r.fired_from="SlideRule Analytics"),r!=null&&r.email&&(r.email_sha256=await Re(r.email)),(a=r==null?void 0:r.user_properties)!=null&&a.email&&(r.email_sha256=await Re(r.email)),Object.assign({},e,{properties:r})},"page:google-tag-manager":({payload:e})=>{let t=Object.assign({},e,{});return t.type="track",t.event="pageview",t.properties.fired_from="SlideRule Analytics",t.properties.ecommerce_event=!1,t},"identify:google-tag-manager":async({payload:e})=>{var n,r,a;let t=Object.assign({},e,{});return t.traits.ecommerce_event=!1,t.traits.fired_from="SlideRule Analytics",(n=t==null?void 0:t.traits)!=null&&n.email&&(t.traits.email_sha256=await Re(t.traits.email)),(a=(r=t==null?void 0:t.traits)==null?void 0:r.user_properties)!=null&&a.email&&(t.traits.email_sha256=await Re(t.traits.email)),t}},hy=async(e,t)=>{var n=Ue("_ga");if(n){var r=n.match(/GA\d+\.\d+\.(\d+\.\d+)/);if(r){const a=r[1];return $(`ga4 client found from cookie ${a}`,t),a}}if(window.gtag){const i=await new Promise(o=>{window.gtag("get",e,"client_id",o)}).then(o=>o);return $(`ga4 client found from gtag get ${i}`,t),i}else $("ERROR: gtag not loaded. No client ids saved",!0)};function yy(e){var t=/GS1\.1\.(\d+)\./,n=e.match(t);return n&&n[1]?n[1]:null}const vy=async(e,t)=>{var n=Ue(`_ga_${e.substring(2)}`);let r=n?yy(n):null;if(r)return $(`ga4 session id for ${e} found from cookie ${r}`,t),r;if(window.gtag)return r=await new Promise(i=>{window.gtag("get",e,"session_id",i)}).then(i=>i),$(`ga4 session id for ${e} found from gtag get ${r}`,t),r;$("ERROR: gtag not loaded. No client ids saved",!0)},_y=async(e,t,n)=>{t.google_analytics_4=[];const r=await hy(e.google_analytics_4.measurementIds[0],n);for await(const a of e.google_analytics_4.measurementIds){const i=await vy(a,n);t.google_analytics_4.push({measurement_id:a,client_id:r,session_id:i})}return t},by=async(e,t,n,r)=>{var d,m;const a=F(e,"meta_pixel.pixelIds");t.meta_pixel=[];let i=Ue("_fbp"),o=Ue("_fbc");const s=await Jm(),c=window.navigator.userAgent;if(i||($("meta _fbp cookie not found. autogenerating.",r),i=`fb.1.${Date.now()}.${Wm(100,1e9)}`,kt("_fbp",i,180)),!o&&window.location.search.includes("fbclid=")){$("meta _fbc cookie not found. autogenerating using fbclid.",r);const v=Ne(window.location.href).fbclid;o=`fb.1.${Date.now()}.${v}`,kt("_fbc",o,180)}const u=(m=(d=window==null?void 0:window.slideruleData)==null?void 0:d.analytics)==null?void 0:m.user(),g=F(u,"userId"),f=F(u,"anonymousId");return a.forEach(v=>{t.meta_pixel.push({pixel_id:v,fbp:i,fbc:o,user_id:n||g,anonymous_id:f,ia:s,ua:c})}),t},wy=(e,t,n)=>{var i;const r=hn("ranMID","_sra_ranMID"),a=(i=e==null?void 0:e.rakuten)==null?void 0:i.merchantIds.map(o=>o);if(a!=null&&a.includes(r)){let o=ee("_sra_ranTimeEntered");Ne(window.location.href).ranSiteID&&Ne(window.location.href).ranSiteID!==ee("_sra_ranSiteID")&&($("ranSiteID changed. updating time entered.",n),o=new Date().toISOString(),fa("_sra_ranTimeEntered",o));const s=hn("ranSiteID","_sra_ranSiteID"),c=hn("ranMID","_sra_ranEAID");s&&(t.rakuten=[],t.rakuten.push({site_id:s,merchant_id:r,publishers_encrypted_id:c,time_entered:o}))}return t},$y=e=>{let t,n;const r=ee("landingUrlParams"),a=ee("landingReferrer");if(r)t=r;else{const i=window.location.search;i?(X("landingUrlParams",i),t=i):(X("landingUrlParams","no params"),t="no params")}if(a)n=a;else{const i=document.referrer;i?(X("landingReferrer",i),n=i):(X("landingReferrer","no referrer"),n="no referrer")}return e.general.landing_url_params=t,e.general.landing_referrer=n,e},Sy=async(e,t)=>{const n=await de(),{attributes:r}=n,a=JSON.stringify(e);if(r.sra_identifiers===a&&r.sra_debug===JSON.stringify(t))return n;const o={attributes:{...r,sra_identifiers:a,sra_debug:t}},s=await En(o);return $("updated cart with tracking ids.",t),s},Iy=async e=>{var i,o;const t=await de();if(ee("sra_cart_token")===t.token||((o=(i=window==null?void 0:window.slideruleData)==null?void 0:i.configurationOptions)==null?void 0:o.avoidRaceWithLittelData))return $("cart id already set.",e),t;const a=await En({});return $("set cart id.",e),a},xy=async(e,t,n)=>{const r=e,a=ee("sra_cart_token"),i=ee("sra_identifiers"),o=ee("sra_debug");if(JSON.stringify(i)===JSON.stringify(r)&&o===t&&a===n){$("sra_identifiers found in session storage. Skipping Redis update.",t);return}const c={cart_token:n,identifiers:r};let u;try{return u=await await fetch("https://api.slideruletools.com/v1/identifiers",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)}),u.status===200&&($("sra_identifiers saved to redis.",t),X("sra_cart_token",n,{storage:"sessionStorage"}),X("sra_identifiers",r,{storage:"sessionStorage"}),X("sra_debug",t,{storage:"sessionStorage"}),$("sra_identifiers saved to session storage.",t)),u}catch(g){console.log(`SlideRule Analytics: update redis attributes failed. ${g}.`)}return u},Oy=async(e,t,n)=>{var o,s,c;let r;const a=(o=window==null?void 0:window.Shopify)==null?void 0:o.shop;n||((c=(s=window==null?void 0:window.slideruleData)==null?void 0:s.configurationOptions)==null?void 0:c.disableCartAttributes)?n?(r=await de(),$("skipping cart update because skipCart is true",t)):($(`skipping cart update for ${a}`,t),r=await Iy(t)):r=await Sy(e,t);const i=r.token;await xy(e,t,i),window.slideruleData.cart=r},rt=async(e,t,n,r)=>{var g,f,d,m,v;const a=(g=window==null?void 0:window.slideruleData)==null?void 0:g.customer,o=((d=(f=window.slideruleData)==null?void 0:f.shopifyLiquidData)==null?void 0:d.customer)||a,{id:s,...c}=o||{};$("handling identifiers.",n);let u={};if(u.general={},e.google_analytics_4&&t&&(u=await _y(e,u,n),$("received ga4 indentifies.",n)),e.meta_pixel&&(u=await by(e,u,s,n),$("received meta pixels indentifies.",n)),e.rakuten&&(u=await wy(e,u,n),u.rakuten&&$("received rakuten indentifies.",n)),(v=(m=window==null?void 0:window.slideruleData)==null?void 0:m.configurationOptions)!=null&&v.saveLandingPageUrlParamsToCart&&(u=$y(u),$("received landing page parameters.",n)),t||($("analytics_consent_granted set to false. Saving consent status.",n),u.general.analytics_consent_granted=!1),(u.google_analytics_4||u.meta_pixel||u.general||u.rakuten)&&await Oy(u,n,r),t){const y=F(u,"google_analytics_4[0].client_id"),_=F(u,"meta_pixel[0].fbp"),w=F(u,"meta_pixel[0].fbc");s?(window.slideruleData.analytics.identify(s,{custom_client_id:y?`${y}.`:void 0,meta_pixel_fbp:_,meta_pixel_fbc:w,...c}),$(`identifiers found for customer ${s}. ${JSON.stringify(u)}`,n)):(window.slideruleData.analytics.identify({custom_client_id:`${y}.`,meta_pixel_fbp:_,meta_pixel_fbc:w}),$(`identifiers found ${JSON.stringify(u)}`,n))}};function Aa(e,t,n,r,a){for(t=t.split?t.split("."):t,r=0;r<t.length;r++)e=e?e[t[r]]:a;return e===a?n:e}function Pa(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch{return null}}function Ay(){if(Q){var e=navigator,t=e.languages;return e.userLanguage||(t&&t.length?t[0]:e.language)}}function Py(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}}function Cy(e){return function(t){for(var n,r=Object.create(null),a=/([^&=]+)=?([^&]*)/g;n=a.exec(t);){var i=Pa(n[1]),o=Pa(n[2]);i.substring(i.length-2)==="[]"?(r[i=i.substring(0,i.length-2)]||(r[i]=[])).push(o):r[i]=o===""||o}for(var s in r){var c=s.split("[");c.length>1&&(ky(r,c.map(function(u){return u.replace(/[?[\]\\ ]/g,"")}),r[s]),delete r[s])}return r}(function(t){if(t){var n=t.match(/\?(.*)/);return n&&n[1]?n[1].split("#")[0]:""}return Q&&window.location.search.substring(1)}(e))}function ky(e,t,n){for(var r=t.length-1,a=0;a<r;++a){var i=t[a];if(i==="__proto__"||i==="constructor")break;i in e||(e[i]={}),e=e[i]}e[t[r]]=n}function Et(){for(var e="",t=0,n=4294967295*Math.random()|0;t++<36;){var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx"[t-1],a=15&n;e+=r=="-"||r=="4"?r:(r=="x"?a:3&a|8).toString(16),n=t%8==0?4294967295*Math.random()|0:n>>4}return e}function I(){return I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I.apply(this,arguments)}var ce="function",ie="undefined",Ty="@@redux/"+Math.random().toString(36),Ca=function(){return typeof Symbol===ce&&Symbol.observable||"@@observable"}(),Dt=" != "+ce;function ka(e,t,n){var r;if(typeof t===ce&&typeof n===ie&&(n=t,t=void 0),typeof n!==ie){if(typeof n!==ce)throw new Error("enhancer"+Dt);return n(ka)(e,t)}if(typeof e!==ce)throw new Error("reducer"+Dt);var a=e,i=t,o=[],s=o,c=!1;function u(){s===o&&(s=o.slice())}function g(){return i}function f(m){if(typeof m!==ce)throw new Error("Listener"+Dt);var v=!0;return u(),s.push(m),function(){if(v){v=!1,u();var y=s.indexOf(m);s.splice(y,1)}}}function d(m){if(!W(m))throw new Error("Act != obj");if(typeof m.type===ie)throw new Error("ActType "+ie);if(c)throw new Error("Dispatch in reducer");try{c=!0,i=a(i,m)}finally{c=!1}for(var v=o=s,y=0;y<v.length;y++)(0,v[y])();return m}return d({type:"@@redux/INIT"}),(r={dispatch:d,subscribe:f,getState:g,replaceReducer:function(m){if(typeof m!==ce)throw new Error("next reducer"+Dt);a=m,d({type:"@@redux/INIT"})}})[Ca]=function(){var m,v=f;return(m={subscribe:function(y){if(typeof y!="object")throw new TypeError("Observer != obj");function _(){y.next&&y.next(g())}return _(),{unsubscribe:v(_)}}})[Ca]=function(){return this},m},r}function Ey(e,t){var n=t&&t.type;return"action "+(n&&n.toString()||"?")+"reducer "+e+" returns "+ie}function qe(){var e=[].slice.call(arguments);return e.length===0?function(t){return t}:e.length===1?e[0]:e.reduce(function(t,n){return function(){return t(n.apply(void 0,[].slice.call(arguments)))}})}function Dy(){var e=arguments;return function(t){return function(n,r,a){var i,o=t(n,r,a),s=o.dispatch,c={getState:o.getState,dispatch:function(u){return s(u)}};return i=[].slice.call(e).map(function(u){return u(c)}),I({},o,{dispatch:s=qe.apply(void 0,i)(o.dispatch)})}}}var ue=fe+"anon_id",_e=fe+"user_id",Fe=fe+"user_traits",le="userId",ze="anonymousId",Nt=["bootstrap","params","campaign","initializeStart","initialize","initializeEnd","ready","resetStart","reset","resetEnd","pageStart","page","pageEnd","pageAborted","trackStart","track","trackEnd","trackAborted","identifyStart","identify","identifyEnd","identifyAborted","userIdChanged","registerPlugins","enablePlugin","disablePlugin","online","offline","setItemStart","setItem","setItemEnd","setItemAborted","removeItemStart","removeItem","removeItemEnd","removeItemAborted"],$n=["name","EVENTS","config","loaded"],x=Nt.reduce(function(e,t){return e[t]=t,e},{registerPluginType:function(e){return"registerPlugin:"+e},pluginReadyType:function(e){return"ready:"+e}}),Ta=/^utm_/,Ea=/^an_prop_/,Da=/^an_trait_/;function Ny(e){var t=e.storage.setItem;return function(n){return function(r){return function(a){if(a.type===x.bootstrap){var i=a.params,o=a.user,s=a.persistedUser,c=a.initialUser,u=s.userId===o.userId;s.anonymousId!==o.anonymousId&&t(ue,o.anonymousId),u||t(_e,o.userId),c.traits&&t(Fe,I({},u&&s.traits?s.traits:{},c.traits));var g=Object.keys(a.params);if(g.length){var f=i.an_uid,d=i.an_event,m=g.reduce(function(v,y){if(y.match(Ta)||y.match(/^(d|g)clid/)){var _=y.replace(Ta,"");v.campaign[_==="campaign"?"name":_]=i[y]}return y.match(Ea)&&(v.props[y.replace(Ea,"")]=i[y]),y.match(Da)&&(v.traits[y.replace(Da,"")]=i[y]),v},{campaign:{},props:{},traits:{}});n.dispatch(I({type:x.params,raw:i},m,f?{userId:f}:{})),f&&setTimeout(function(){return e.identify(f,m.traits)},0),d&&setTimeout(function(){return e.track(d,m.props)},0),Object.keys(m.campaign).length&&n.dispatch({type:x.campaign,campaign:m.campaign})}}return r(a)}}}}function My(e){return function(t,n){if(t===void 0&&(t={}),n===void 0&&(n={}),n.type===x.setItemEnd){if(n.key===ue)return I({},t,{anonymousId:n.value});if(n.key===_e)return I({},t,{userId:n.value})}switch(n.type){case x.identify:return Object.assign({},t,{userId:n.userId,traits:I({},t.traits,n.traits)});case x.reset:return[_e,ue,Fe].forEach(function(r){e.removeItem(r)}),Object.assign({},t,{userId:null,anonymousId:null,traits:{}});default:return t}}}function Na(e){return{userId:e.getItem(_e),anonymousId:e.getItem(ue),traits:e.getItem(Fe)}}var Sn=function(e){return fe+"TEMP"+fe+e};function Ly(e){var t=e.storage,n=t.setItem,r=t.removeItem,a=t.getItem;return function(i){return function(o){return function(s){var c=s.userId,u=s.traits,g=s.options;if(s.type===x.reset&&([_e,Fe,ue].forEach(function(m){r(m)}),[le,ze,"traits"].forEach(function(m){Ie(Sn(m))})),s.type===x.identify){a(ue)||n(ue,Et());var f=a(_e),d=a(Fe)||{};f&&f!==c&&i.dispatch({type:x.userIdChanged,old:{userId:f,traits:d},new:{userId:c,traits:u},options:g}),c&&n(_e,c),u&&n(Fe,I({},d,u))}return o(s)}}}}var at={};function Ma(e,t){at[e]&&ne(at[e])&&(at[e](t),delete at[e])}function La(e,t,n){return new Promise(function(r,a){return t()?r(e):n<1?a(I({},e,{queue:!0})):new Promise(function(i){return setTimeout(i,10)}).then(function(i){return La(e,t,n-10).then(r,a)})})}function ja(e,t,n){var r=t(),a=e.getState(),i=a.plugins,o=a.queue,s=a.user;if(!a.context.offline&&o&&o.actions&&o.actions.length){var c=o.actions.reduce(function(g,f,d){return i[f.plugin].loaded?(g.process.push(f),g.processIndex.push(d)):(g.requeue.push(f),g.requeueIndex.push(d)),g},{processIndex:[],process:[],requeue:[],requeueIndex:[]});if(c.processIndex&&c.processIndex.length){c.processIndex.forEach(function(g){var f=o.actions[g],d=f.plugin,m=f.payload.type,v=r[d][m];if(v&&ne(v)){var y=function(w,S){return w===void 0&&(w={}),S===void 0&&(S={}),[le,ze].reduce(function(k,h){return w.hasOwnProperty(h)&&S[h]&&S[h]!==w[h]&&(k[h]=S[h]),k},w)}(f.payload,s);v({payload:y,config:i[d].config,instance:n});var _=m+":"+d;e.dispatch(I({},y,{type:_,_:{called:_,from:"queueDrain"}}))}});var u=o.actions.filter(function(g,f){return!~c.processIndex.indexOf(f)});o.actions=u}}}var In=function(e){var t=e.data,n=e.action,r=e.instance,a=e.state,i=e.allPlugins,o=e.allMatches,s=e.store,c=e.EVENTS;try{var u=a.plugins,g=a.context,f=n.type,d=f.match(Ge),m=t.exact.map(function(_){return _.pluginName});d&&(m=o.during.map(function(_){return _.pluginName}));var v=function(_,w){return function(S,k,h){var O=k.config,R=k.name,E=R+"."+S.type;h&&(E=h.event);var L=S.type.match(Ge)?function(q,U,K,G,J){return function(P,M){var Y=G?G.name:q,V=M&&it(M)?M:K;if(G&&(!(V=M&&it(M)?M:[q]).includes(q)||V.length!==1))throw new Error("Method "+U+" can only abort "+q+" plugin. "+JSON.stringify(V)+" input valid");return I({},J,{abort:{reason:P,plugins:V,caller:U,_:Y}})}}(R,E,w,h,S):function(q,U){return function(){throw new Error(q.type+" action not cancellable. Remove abort in "+U)}}(S,E);return{payload:jy(S),instance:_,config:O||{},abort:L}}}(r,m),y=t.exact.reduce(function(_,w){var S=w.pluginName,k=w.methodName,h=!1;return k.match(/^initialize/)||k.match(/^reset/)||(h=!u[S].loaded),g.offline&&k.match(/^(page|track|identify)/)&&(h=!0),_[""+S]=h,_},{});return Promise.resolve(t.exact.reduce(function(_,w,S){var k=w.pluginName;return Promise.resolve(_).then(function(h){function O(){return Promise.resolve(h)}var R=function(){if(t.namespaced&&t.namespaced[k])return Promise.resolve(t.namespaced[k].reduce(function(E,L,q){return Promise.resolve(E).then(function(U){return L.method&&ne(L.method)?(function(P,M){var Y=Ka(P);if(Y&&Y.name===M){var V=Ka(Y.method);throw new Error([M+" plugin is calling method "+P,"Plugins cant call self","Use "+Y.method+" "+(V?"or "+V.method:"")+" in "+M+" plugin insteadof "+P].join(`
`))}}(L.methodName,L.pluginName),Promise.resolve(L.method({payload:U,instance:r,abort:(K=U,G=k,J=L.pluginName,function(P,M){return I({},K,{abort:{reason:P,plugins:M||[G],caller:f,from:J||G}})}),config:qa(L.pluginName,u,i),plugins:u})).then(function(P){var M=W(P)?P:{};return Promise.resolve(I({},U,M))})):U;var K,G,J})},Promise.resolve(n))).then(function(E){h[k]=E});h[k]=n}();return R&&R.then?R.then(O):O()})},Promise.resolve({}))).then(function(_){return Promise.resolve(t.exact.reduce(function(w,S,k){try{var h=t.exact.length===k+1,O=S.pluginName,R=i[O];return Promise.resolve(w).then(function(E){var L=_[O]?_[O]:{};if(d&&(L=E),On(L,O))return xn({data:L,method:f,instance:r,pluginName:O,store:s}),Promise.resolve(E);if(On(E,O))return h&&xn({data:E,method:f,instance:r,store:s}),Promise.resolve(E);if(y.hasOwnProperty(O)&&y[O]===!0)return s.dispatch({type:"queue",plugin:O,payload:L,_:{called:"queue",from:"queueMechanism"}}),Promise.resolve(E);var q=v(_[O],i[O]);return Promise.resolve(R[f]({abort:q.abort,payload:L,instance:r,config:qa(O,u,i),plugins:u})).then(function(U){var K=W(U)?U:{},G=I({},E,K),J=_[O];if(On(J,O))xn({data:J,method:f,instance:r,pluginName:O,store:s});else{var P=f+":"+O;(P.match(/:/g)||[]).length<2&&!f.match(Ra)&&!f.match(Ua)&&r.dispatch(I({},d?G:L,{type:P,_:{called:P,from:"submethod"}}))}return Promise.resolve(G)})})}catch(E){return Promise.reject(E)}},Promise.resolve(n))).then(function(w){if(!(f.match(Ge)||f.match(/^registerPlugin/)||f.match(Ua)||f.match(Ra)||f.match(/^params/)||f.match(/^userIdChanged/))){if(c.plugins.includes(f),w._&&w._.originalAction===f)return w;var S=I({},w,{_:{originalAction:w.type,called:w.type,from:"engineEnd"}});Ga(w,t.exact.length)&&!f.match(/End$/)&&(S=I({},S,{type:w.type+"Aborted"})),s.dispatch(S)}return w})})}catch(_){return Promise.reject(_)}},Ge=/Start$/,Ra=/^bootstrap/,Ua=/^ready/;function xn(e){var t=e.pluginName,n=e.method+"Aborted"+(t?":"+t:"");e.store.dispatch(I({},e.data,{type:n,_:{called:n,from:"abort"}}))}function qa(e,t,n){var r=t[e]||n[e];return r&&r.config?r.config:{}}function Fa(e,t){return t.reduce(function(n,r){return r[e]?n.concat({methodName:e,pluginName:r.name,method:r[e]}):n},[])}function za(e,t){var n=e.replace(Ge,""),r=t?":"+t:"";return[""+e+r,""+n+r,n+"End"+r]}function On(e,t){var n=e.abort;return!!n&&(n===!0||Ba(n,t)||n&&Ba(n.plugins,t))}function Ga(e,t){var n=e.abort;if(!n)return!1;if(n===!0||be(n))return!0;var r=n.plugins;return it(n)&&n.length===t||it(r)&&r.length===t}function it(e){return Array.isArray(e)}function Ba(e,t){return!(!e||!it(e))&&e.includes(t)}function Ka(e){var t=e.match(/(.*):(.*)/);return!!t&&{method:t[1],name:t[2]}}function jy(e){return Object.keys(e).reduce(function(t,n){return n==="type"||(t[n]=W(e[n])?Object.assign({},e[n]):e[n]),t},{})}function Ry(e,t,n){var r={};return function(a){return function(i){return function(o){try{var s,c=function(h){return s?h:i(f)},u=o.type,g=o.plugins,f=o;if(o.abort)return Promise.resolve(i(o));if(u===x.enablePlugin&&a.dispatch({type:x.initializeStart,plugins:g,disabled:[],fromEnable:!0,meta:o.meta}),u===x.disablePlugin&&setTimeout(function(){return Ma(o.meta.rid,{payload:o})},0),u===x.initializeEnd){var d=t(),m=Object.keys(d),v=m.filter(function(h){return g.includes(h)}).map(function(h){return d[h]}),y=[],_=[],w=o.disabled,S=v.map(function(h){var O=h.name;return La(h,h.loaded,1e4).then(function(R){return r[O]||(a.dispatch({type:x.pluginReadyType(O),name:O,events:Object.keys(h).filter(function(E){return!$n.includes(E)})}),r[O]=!0),y=y.concat(O),h}).catch(function(R){if(R instanceof Error)throw new Error(R);return _=_.concat(R.name),R})});Promise.all(S).then(function(h){var O={plugins:y,failed:_,disabled:w};setTimeout(function(){m.length===S.length+w.length&&a.dispatch(I({},{type:x.ready},O))},0)})}var k=function(){if(u!==x.bootstrap)return/^ready:([^:]*)$/.test(u)&&setTimeout(function(){return ja(a,t,e)},0),Promise.resolve(function(h,O,R,E,L){try{var q=ne(O)?O():O,U=h.type,K=U.replace(Ge,"");if(h._&&h._.called)return Promise.resolve(h);var G=R.getState(),J=(Y=q,(V=G.plugins)===void 0&&(V={}),(p=h.options)===void 0&&(p={}),Object.keys(Y).filter(function(l){var b=p.plugins||{};return $i(b[l])?b[l]:b.all!==!1&&(!V[l]||V[l].enabled!==!1)}).map(function(l){return Y[l]}));U===x.initializeStart&&h.fromEnable&&(J=Object.keys(G.plugins).filter(function(l){var b=G.plugins[l];return h.plugins.includes(l)&&!b.initialized}).map(function(l){return q[l]}));var P=J.map(function(l){return l.name}),M=function(l,b,C){var T=za(l).map(function(A){return Fa(A,b)});return b.reduce(function(A,B){var D=B.name,z=za(l,D).map(function(Ke){return Fa(Ke,b)}),N=z[0],re=z[1],Be=z[2];return N.length&&(A.beforeNS[D]=N),re.length&&(A.duringNS[D]=re),Be.length&&(A.afterNS[D]=Be),A},{before:T[0],beforeNS:{},during:T[1],duringNS:{},after:T[2],afterNS:{}})}(U,J);return Promise.resolve(In({action:h,data:{exact:M.before,namespaced:M.beforeNS},state:G,allPlugins:q,allMatches:M,instance:R,store:E,EVENTS:L})).then(function(l){function b(){var A=function(){if(U.match(Ge))return Promise.resolve(In({action:I({},C,{type:K+"End"}),data:{exact:M.after,namespaced:M.afterNS},state:G,allPlugins:q,allMatches:M,instance:R,store:E,EVENTS:L})).then(function(B){B.meta&&B.meta.hasCallback&&Ma(B.meta.rid,{payload:B})})}();return A&&A.then?A.then(function(){return l}):l}if(Ga(l,P.length))return l;var C,T=function(){if(U!==K)return Promise.resolve(In({action:I({},l,{type:K}),data:{exact:M.during,namespaced:M.duringNS},state:G,allPlugins:q,allMatches:M,instance:R,store:E,EVENTS:L})).then(function(A){C=A});C=l}();return T&&T.then?T.then(b):b()})}catch(l){return Promise.reject(l)}var Y,V,p}(o,t,e,a,n)).then(function(h){var O=i(h);return s=1,O})}();return Promise.resolve(k&&k.then?k.then(c):c(k))}catch(h){return Promise.reject(h)}}}}}function Uy(e){return function(t){return function(n){return function(r){var a=r.type,i=r.key,o=r.value,s=r.options;if(a===x.setItem||a===x.removeItem){if(r.abort)return n(r);a===x.setItem?e.setItem(i,o,s):e.removeItem(i,s)}return n(r)}}}}var qy=function(){var e=this;this.before=[],this.after=[],this.addMiddleware=function(t,n){e[n]=e[n].concat(t)},this.removeMiddleware=function(t,n){var r=e[n].findIndex(function(a){return a===t});r!==-1&&(e[n]=[].concat(e[n].slice(0,r),e[n].slice(r+1)))},this.dynamicMiddlewares=function(t){return function(n){return function(r){return function(a){var i={getState:n.getState,dispatch:function(s){return n.dispatch(s)}},o=e[t].map(function(s){return s(i)});return qe.apply(void 0,o)(r)(a)}}}}};function Fy(e){return function(t,n){t===void 0&&(t={});var r={};if(n.type==="initialize:aborted")return t;if(/^registerPlugin:([^:]*)$/.test(n.type)){var a=Ha(n.type,"registerPlugin"),i=e()[a];if(!i||!a)return t;var o=n.enabled;return r[a]={enabled:o,initialized:!!o&&Boolean(!i.initialize),loaded:!!o&&Boolean(i.loaded()),config:i.config||{}},I({},t,r)}if(/^initialize:([^:]*)$/.test(n.type)){var s=Ha(n.type,x.initialize),c=e()[s];return c&&s?(r[s]=I({},t[s],{initialized:!0,loaded:Boolean(c.loaded())}),I({},t,r)):t}if(/^ready:([^:]*)$/.test(n.type))return r[n.name]=I({},t[n.name],{loaded:!0}),I({},t,r);switch(n.type){case x.disablePlugin:return I({},t,Va(n.plugins,!1,t));case x.enablePlugin:return I({},t,Va(n.plugins,!0,t));default:return t}}}function Ha(e,t){return e.substring(t.length+1,e.length)}function Va(e,t,n){return e.reduce(function(r,a){return r[a]=I({},n[a],{enabled:t}),r},n)}function Wa(e){try{return JSON.parse(JSON.stringify(e))}catch{}return e}var zy={last:{},history:[]};function Gy(e,t){e===void 0&&(e=zy);var n=t.options,r=t.meta;if(t.type===x.track){var a=Wa(I({event:t.event,properties:t.properties},Object.keys(n).length&&{options:n},{meta:r}));return I({},e,{last:a,history:e.history.concat(a)})}return e}var By={actions:[]};function Ky(e,t){e===void 0&&(e=By);var n=t.payload;switch(t.type){case"queue":var r;return r=n&&n.type&&n.type===x.identify?[t].concat(e.actions):e.actions.concat(t),I({},e,{actions:r});case"dequeue":return[];default:return e}}var Ja=/#.*$/;function Hy(e){var t=/(http[s]?:\/\/)?([^\/\s]+\/)(.*)/g.exec(e);return"/"+(t&&t[3]?t[3].split("?")[0].replace(Ja,""):"")}var Xa,Za,Ya,Qa,Vy=function(e){if(e===void 0&&(e={}),!Q)return e;var t=document,n=t.title,r=t.referrer,a=window,i=a.location,o=a.innerWidth,s=a.innerHeight,c=i.hash,u=i.search,g=function(d){var m=function(){if(Q){for(var v,y=document.getElementsByTagName("link"),_=0;v=y[_];_++)if(v.getAttribute("rel")==="canonical")return v.getAttribute("href")}}();return m?m.match(/\?/)?m:m+d:window.location.href.replace(Ja,"")}(u),f={title:n,url:g,path:Hy(g),hash:c,search:u,width:o,height:s};return r&&r!==""&&(f.referrer=r),I({},f,e)},Wy={last:{},history:[]};function Jy(e,t){e===void 0&&(e=Wy);var n=t.options;if(t.type===x.page){var r=Wa(I({properties:t.properties,meta:t.meta},Object.keys(n).length&&{options:n}));return I({},e,{last:r,history:e.history.concat(r)})}return e}Xa=function(){if(!Q)return!1;var e=navigator.appVersion;return~e.indexOf("Win")?"Windows":~e.indexOf("Mac")?"MacOS":~e.indexOf("X11")?"UNIX":~e.indexOf("Linux")?"Linux":"Unknown OS"}(),Za=Q?document.referrer:null,Ya=Ay(),Qa=Py();var ei={initialized:!1,sessionId:Et(),app:null,version:null,debug:!1,offline:!!Q&&!navigator.onLine,os:{name:Xa},userAgent:Q?navigator.userAgent:"node",library:{name:"analytics",version:"0.11.0"},timezone:Qa,locale:Ya,campaign:{},referrer:Za};function Xy(e,t){e===void 0&&(e=ei);var n=e.initialized,r=t.campaign;switch(t.type){case x.campaign:return I({},e,{campaign:r});case x.offline:return I({},e,{offline:!0});case x.online:return I({},e,{offline:!1});default:return n?e:I({},ei,e,{initialized:!0})}}var Zy=["plugins","reducers","storage"];function Yy(e,t,n){if(Q){var r=window[(n?"add":"remove")+"EventListener"];e.split(" ").forEach(function(a){r(a,t)})}}function Qy(e){var t=Yy.bind(null,"online offline",function(n){return Promise.resolve(!navigator.onLine).then(e)});return t(!0),function(n){return t(!1)}}function ti(){return ge("analytics",[]),function(e){return function(t,n,r){var a=e(t,n,r),i=a.dispatch;return Object.assign(a,{dispatch:function(o){return Se[$e].analytics.push(o.action||o),i(o)}})}}}function ni(e){return function(){return qe(qe.apply(null,arguments),ti())}}function An(e){return e?Ii(e)?e:[e]:[]}function ri(e,t,n){e===void 0&&(e={});var r,a,i=Et();return t&&(at[i]=(r=t,a=function(o){for(var s,c=o||Array.prototype.slice.call(arguments),u=0;u<c.length;u++)if(ne(c[u])){s=c[u];break}return s}(n),function(o){a&&a(o),r(o)})),I({},e,{rid:i,ts:new Date().getTime()},t?{hasCallback:!0}:{})}function ev(e){e===void 0&&(e={});var t=e.reducers||{},n=e.initialUser||{},r=(e.plugins||[]).reduce(function(p,l){if(ne(l))return p.middlewares=p.middlewares.concat(l),p;if(l.NAMESPACE&&(l.name=l.NAMESPACE),!l.name)throw new Error("https://lytics.dev/errors/1");var b=l.EVENTS?Object.keys(l.EVENTS).map(function(A){return l.EVENTS[A]}):[];p.pluginEnabled[l.name]=!(l.enabled===!1||l.config&&l.config.enabled===!1),delete l.enabled,l.methods&&(p.methods[l.name]=Object.keys(l.methods).reduce(function(A,B){var D;return A[B]=(D=l.methods[B],function(){for(var z=Array.prototype.slice.call(arguments),N=new Array(D.length),re=0;re<z.length;re++)N[re]=z[re];return N[N.length]=h,D.apply({instance:h},N)}),A},{}),delete l.methods);var C=Object.keys(l).concat(b),T=new Set(p.events.concat(C));if(p.events=Array.from(T),p.pluginsArray=p.pluginsArray.concat(l),p.plugins[l.name])throw new Error(l.name+"AlreadyLoaded");return p.plugins[l.name]=l,p.plugins[l.name].loaded||(p.plugins[l.name].loaded=function(){return!0}),p},{plugins:{},pluginEnabled:{},methods:{},pluginsArray:[],middlewares:[],events:[]}),a=e.storage?e.storage:{getItem:pe,setItem:ge,removeItem:Ie},i=function(p){return function(l,b,C){return b.getState("user")[l]||(C&&W(C)&&C[l]?C[l]:Na(p)[l]||pe(Sn(l))||null)}}(a),o=r.plugins,s=r.events.filter(function(p){return!$n.includes(p)}).sort(),c=new Set(s.concat(Nt).filter(function(p){return!$n.includes(p)})),u=Array.from(c).sort(),g=function(){return o},f=new qy,d=f.addMiddleware,m=f.removeMiddleware,v=f.dynamicMiddlewares,y=function(){throw new Error("Abort disabled inListener")},_=Cy(),w=Na(a),S=I({},w,n,_.an_uid?{userId:_.an_uid}:{},_.an_aid?{anonymousId:_.an_aid}:{});S.anonymousId||(S.anonymousId=Et());var k=I({enable:function(p,l){return new Promise(function(b){P.dispatch({type:x.enablePlugin,plugins:An(p),_:{originalAction:x.enablePlugin}},b,[l])})},disable:function(p,l){return new Promise(function(b){P.dispatch({type:x.disablePlugin,plugins:An(p),_:{originalAction:x.disablePlugin}},b,[l])})}},r.methods),h={identify:function(p,l,b,C){try{var T=be(p)?p:null,A=W(p)?p:l,B=b||{},D=h.user();ge(Sn(le),T);var z=T||A.userId||i(le,h,A);return Promise.resolve(new Promise(function(N){P.dispatch(I({type:x.identifyStart,userId:z,traits:A||{},options:B,anonymousId:D.anonymousId},D.id&&D.id!==T&&{previousId:D.id}),N,[l,b,C])}))}catch(N){return Promise.reject(N)}},track:function(p,l,b,C){try{var T=W(p)?p.event:p;if(!T||!be(T))throw new Error("EventMissing");var A=W(p)?p:l||{},B=W(b)?b:{};return Promise.resolve(new Promise(function(D){P.dispatch({type:x.trackStart,event:T,properties:A,options:B,userId:i(le,h,l),anonymousId:i(ze,h,l)},D,[l,b,C])}))}catch(D){return Promise.reject(D)}},page:function(p,l,b){try{var C=W(p)?p:{},T=W(l)?l:{};return Promise.resolve(new Promise(function(A){P.dispatch({type:x.pageStart,properties:Vy(C),options:T,userId:i(le,h,C),anonymousId:i(ze,h,C)},A,[p,l,b])}))}catch(A){return Promise.reject(A)}},user:function(p){if(p===le||p==="id")return i(le,h);if(p===ze||p==="anonId")return i(ze,h);var l=h.getState("user");return p?Aa(l,p):l},reset:function(p){return new Promise(function(l){P.dispatch({type:x.resetStart},l,p)})},ready:function(p){return h.on(x.ready,p)},on:function(p,l){if(!p||!ne(l))return!1;if(p===x.bootstrap)throw new Error(".on disabled for "+p);var b=/Start$|Start:/;if(p==="*"){var C=function(D){return function(z){return function(N){return N.type.match(b)&&l({payload:N,instance:h,plugins:o}),z(N)}}},T=function(D){return function(z){return function(N){return N.type.match(b)||l({payload:N,instance:h,plugins:o}),z(N)}}};return d(C,Mt),d(T,Lt),function(){m(C,Mt),m(T,Lt)}}var A=p.match(b)?Mt:Lt,B=function(D){return function(z){return function(N){return N.type===p&&l({payload:N,instance:h,plugins:o,abort:y}),z(N)}}};return d(B,A),function(){return m(B,A)}},once:function(p,l){if(!p||!ne(l))return!1;if(p===x.bootstrap)throw new Error(".once disabled for "+p);var b=h.on(p,function(C){l({payload:C.payload,instance:h,plugins:o,abort:y}),b()});return b},getState:function(p){var l=P.getState();return p?Aa(l,p):Object.assign({},l)},dispatch:function(p){var l=be(p)?{type:p}:p;if(Nt.includes(l.type))throw new Error("reserved action "+l.type);var b=I({},l,{_:I({originalAction:l.type},p._||{})});P.dispatch(b)},enablePlugin:k.enable,disablePlugin:k.disable,plugins:k,storage:{getItem:a.getItem,setItem:function(p,l,b){P.dispatch({type:x.setItemStart,key:p,value:l,options:b})},removeItem:function(p,l){P.dispatch({type:x.removeItemStart,key:p,options:l})}},setAnonymousId:function(p,l){h.storage.setItem(ue,p,l)},events:{core:Nt,plugins:s}},O=r.middlewares.concat([function(p){return function(l){return function(b){return b.meta||(b.meta=ri()),l(b)}}},v(Mt),Ry(h,g,{all:u,plugins:s}),Uy(a),Ny(h),Ly(h),v(Lt)]),R={context:Xy,user:My(a),page:Jy,track:Gy,plugins:Fy(g),queue:Ky},E=qe,L=qe;if(Q&&e.debug){var q=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;q&&(E=q({trace:!0,traceLimit:25})),L=function(){return arguments.length===0?ti():W(typeof arguments[0])?ni():ni().apply(null,arguments)}}var U,K=function(p){return Object.keys(p).reduce(function(l,b){return Zy.includes(b)||(l[b]=p[b]),l},{})}(e),G=r.pluginsArray.reduce(function(p,l){var b=l.name,C=l.config,T=l.loaded,A=r.pluginEnabled[b];return p[b]={enabled:A,initialized:!!A&&Boolean(!l.initialize),loaded:Boolean(T()),config:C||{}},p},{}),J={context:K,user:S,plugins:G},P=ka(function(p){for(var l=Object.keys(p),b={},C=0;C<l.length;C++){var T=l[C];typeof p[T]===ce&&(b[T]=p[T])}var A,B=Object.keys(b);try{(function(D){Object.keys(D).forEach(function(z){var N=D[z];if(typeof N(void 0,{type:"@@redux/INIT"})===ie||typeof N(void 0,{type:Ty})===ie)throw new Error("reducer "+z+" "+ie)})})(b)}catch(D){A=D}return function(D,z){if(D===void 0&&(D={}),A)throw A;for(var N=!1,re={},Be=0;Be<B.length;Be++){var Ke=B[Be],yi=D[Ke],Tn=(0,b[Ke])(yi,z);if(typeof Tn===ie){var J_=Ey(Ke,z);throw new Error(J_)}re[Ke]=Tn,N=N||Tn!==yi}return N?re:D}}(I({},R,t)),J,L(E(Dy.apply(void 0,O))));P.dispatch=(U=P.dispatch,function(p,l,b){var C=I({},p,{meta:ri(p.meta,l,An(b))});return U.apply(null,[C])});var M=Object.keys(o);P.dispatch({type:x.bootstrap,plugins:M,config:K,params:_,user:S,initialUser:n,persistedUser:w});var Y=M.filter(function(p){return r.pluginEnabled[p]}),V=M.filter(function(p){return!r.pluginEnabled[p]});return P.dispatch({type:x.registerPlugins,plugins:M,enabled:r.pluginEnabled}),r.pluginsArray.map(function(p,l){var b=p.bootstrap,C=p.config,T=p.name;b&&ne(b)&&b({instance:h,config:C,payload:p}),P.dispatch({type:x.registerPluginType(T),name:T,enabled:r.pluginEnabled[T],plugin:p}),r.pluginsArray.length===l+1&&P.dispatch({type:x.initializeStart,plugins:Y,disabled:V})}),Qy(function(p){P.dispatch({type:p?x.offline:x.online})}),function(p,l,b){setInterval(function(){return ja(p,l,b)},3e3)}(P,g,h),h}var Mt="before",Lt="after";function tv(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ii(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ai(Object(n),!0).forEach(function(r){tv(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ai(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nv(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={storage:Li};return ev(ii(ii({},t),e))}const jt=[];class ot{static add(t,n,r){rv(t,n).add(r)}static remove(t,n,r){let a=oi(t,n);a&&a.remove(r)}constructor(t,n){this.context=t,this.methodName=n,this.isTask=/Task$/.test(n),this.originalMethodReference=this.isTask?t.get(n):t[n],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=(...r)=>{const a=this.boundMethodChain[this.boundMethodChain.length-1];return a(...r)},this.isTask?t.set(n,this.wrappedMethod):t[n]=this.wrappedMethod}add(t){this.methodChain.push(t),this.rebindMethodChain()}remove(t){const n=this.methodChain.indexOf(t);n>-1&&(this.methodChain.splice(n,1),this.methodChain.length>0?this.rebindMethodChain():this.destroy())}rebindMethodChain(){this.boundMethodChain=[];for(let t,n=0;t=this.methodChain[n];n++){const r=this.boundMethodChain[n-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(t(r))}}destroy(){const t=jt.indexOf(this);t>-1&&(jt.splice(t,1),this.isTask?this.context.set(this.methodName,this.originalMethodReference):this.context[this.methodName]=this.originalMethodReference)}}function oi(e,t){return jt.filter(n=>n.context==e&&n.methodName==t)[0]}function rv(e,t){let n=oi(e,t);return n||(n=new ot(e,t),jt.push(n)),n}class av{constructor(t){!history.pushState||!window.addEventListener||(this.onUrlChange=()=>{console.warn("UrlChangeTracker not given a callback")},this.path=si(),this.trackReplaceState=t,this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this),ot.add(history,"pushState",this.pushStateOverride),ot.add(history,"replaceState",this.replaceStateOverride),window.addEventListener("popstate",this.handlePopState))}setCallback(t){this.onUrlChange=t}pushStateOverride(t){return(...n)=>{t(...n),this.handleUrlChange(!0)}}replaceStateOverride(t){return(...n)=>{t(...n),this.handleUrlChange(!1)}}handlePopState(){this.handleUrlChange(!0)}handleUrlChange(t){setTimeout(()=>{const n=this.path,r=si();n!=r&&this.shouldTrackUrlChange(r,n)&&(this.path=r,(t||this.trackReplaceState)&&this.onUrlChange(r,n))},0)}shouldTrackUrlChange(t,n){return!!(t&&n)}remove(){this.queue.destroy(),ot.remove(history,"pushState",this.pushStateOverride),ot.remove(history,"replaceState",this.replaceStateOverride),window.removeEventListener("popstate",this.handlePopState)}}function si(){return location.pathname+location.search}const iv=async(e,t,n)=>{var d,m,v,y;$("add to cart form submitted",n);const r=(d=window==null?void 0:window.slideruleData)==null?void 0:d.destinations;r&&($("add to cart form submit, recheck ids",n),(v=(m=window==null?void 0:window.slideruleData)==null?void 0:m.configurationOptions)!=null&&v.skipATCIdentifiersUpdate||await rt(r,!0,n,!0));const a=t.querySelector('select[name="id"]')||t.querySelector('input[name="id"]'),i=t.querySelector('input[name="quantity"]')||document.querySelector('input[name="quantity"]'),o=a.value,s=(y=i==null?void 0:i.value)!=null?y:1,c={id:Number(o),quantity:Number(s)},u=F(window.slideruleData,"cart.items",[]),g=F(window.slideruleData,"cart.token",null);if(!Ct(u,{id:c.id})){const _=await mn("add_to_cart",c,g);window.slideruleData.cart.items.push({..._,id:c.id,quantity:c.quantity})}},ov=async e=>{document.querySelectorAll('form[action^="/cart/add"]').forEach(async n=>{$("add to cart form found. Adding submit listeners.",e);const r=async a=>{await iv(a,n,e)};n.addEventListener("submit",r)})},Pn=async(e,t)=>{var i,o,s;const n=await de();$(`handling cart change from ${e}`,t);const r=F(window.slideruleData,"cart.items",[]),{items:a}=n;if(r.length>a.length)for(const c of r)Ct(a,{id:c.id})||mn("remove_from_cart",c,n.token);else if(a.length>r.length){for(const c of a)if(!Ct(r,{id:c.id})){mn("add_to_cart",c,n.token);const g=(i=window==null?void 0:window.slideruleData)==null?void 0:i.destinations;g&&($("add to cart fetch, recheck ids",t),(s=(o=window==null?void 0:window.slideruleData)==null?void 0:o.configurationOptions)!=null&&s.skipATCIdentifiersUpdate||await rt(g,!0,t,!0))}}return await da()},sv=e=>{(function(t,n){typeof n=="function"&&(t.fetch=function(r,a){const i=F(a,"method","none"),o=n.apply(this,arguments);return o.then(async s=>{const c=s.url,u=i.toUpperCase()==="POST",g=c.toString().includes("/cart/add")||c.toString().includes("/cart/change");if(u&&g)return $(`fetch cart update detected to ${c}`,e),await Pn("fetch",e)}),o})})(window,window.fetch)},cv=e=>{const t=window.XMLHttpRequest.prototype.open;window.XMLHttpRequest.prototype.open=function(...n){const[r,a]=n;return this.addEventListener("readystatechange",()=>{this.readyState===this.DONE&&(async({method:i,url:o})=>{const s=i.toUpperCase()==="POST",c=o.toString().includes("/cart/add")||o.toString().includes("/cart/change");if(s&&c){$(`XHR cart update detected to ${o}`,e);const u=await window.fetch("/cart.js");return u.clone().json().then(async()=>{if(o.includes("change.js"))return await Pn("XHR",e);if(o.includes("add.js"))return await Pn("XHR",e)}),u}})({method:r,url:a}).catch()}),t.apply(this,n)}},uv=async e=>{var n;const t=(n=window==null?void 0:window.slideruleData)==null?void 0:n.pageType;t==="confirmation"||t==="purchase"||t==="post-purchase"||(da(),cv(e),sv(e))};function lv(e,t){const n={};for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)){const a=t[r]||r;n[a]=e[r]}return n}const dv=async(e,t)=>{const{version:n}=window.slideruleData,r={plugins:{all:!0,"google-analytics":!1,"meta-pixel":!1}};let a;if(n==="v0.0.1"||e==="post-purchase")a=window.slideruleData.orderInformation;else if(n==="v0.0.2"){const{checkout:o,customer:s}=window.slideruleData.shopifyLiquidData,c=window.Shopify.checkout,u=c.line_items.map(d=>{const m={item_product_id:`${d.product_id}`,item_id:`${d.variant_id}`,item_name:d.title,item_brand:d.vendor,item_variant:d.variant_title,affiliation:d.vendor,currency:c.currency,price:Number(d.price),quantity:d.quantity};try{const v=d.discount_allocations.map(w=>w.description).join(", "),y=d.discount_allocations.reduce((w,S)=>w+Number(S.amount),0),_=Number(d.price)-y;m.coupon=v,m.price=_,m.discount=y}catch(v){console.log(`SlideRule Analytics: cannot read discount allocations. ${v}`)}return m}),f=se(lv(s,{"b2b?":"is_b2b",id:"customer_id"}),(d,m)=>m==="orders_count"&&d===0||m==="total_spent"&&d===0||d===null?!0:ve(d));f.customer_id=`${f.customer_id}`,a={transaction_id:`${c.order_id}`,order_number:`${o.order_number}`,order_name:o.order_name,customer_id:`${c.customer_id}`,currency:c.currency,shipping:Number(c.shipping_rate.price),value:Number(c.total_price),tax:Number(o.tax_price)/100,items:u,user_properties:f};try{const d=c.discount.code,m=c.discount.amount;a.coupon=d,a.discount=m}catch(d){console.log(`SlideRule Analytics: cannot read discount allocations. ${d}`)}}const i=e==="post-purchase"?t:e;window.slideruleData.analytics.track(i,{ecommerce_event:!0,...a},r)},fv=async()=>{const{collection:{id:e,handle:t,title:n,rawProducts:r}}=window.slideruleData,i=r.slice(0,5).map(o=>vi(o));window.slideruleData.analytics.track("view_item_list",{ecommerce_event:!0,currency:la(),item_list_id:e||t,item_list_name:n,items:i.map(o=>nt(o))})},ci=async e=>{const t=await ct(e);if(!t)return!1;const n=Xm(window.location.href),r=nt(t,n);return window.slideruleData.analytics.track("view_item",{ecommerce_event:!0,currency:r.currency,value:r.price,items:[r]}),r},pv=async()=>{const e=await de();if(!e)return!1;const{items:t,currency:n,total_price:r,token:a}=e,i=[];for(const s of t){const{handle:c,id:u}=s,g=await ct(c);i.push(nt(g,u))}const o={ecommerce_event:!0,currency:n,cart_id:a,value:r/100,items:i};return window.slideruleData.analytics.track("view_cart",o),o},gv=async e=>{const t=await de();if(!t)return!1;const{items:n,currency:r,total_price:a,token:i}=t,o=[];for(const g of n){const{handle:f,id:d}=g,m=await ct(f);o.push(nt(m,d))}const s={ecommerce_event:!0,currency:r,cart_id:i,value:a/100,items:o},u={contact_information:"begin_checkout",payment_method:"add_shipping_info",processing:"add_payment_info"}[e];return u==="add_shipping_info"&&(s.shipping_tier=F(window,"slideruleData.shippingMethod.title","None")),u==="add_payment_info"&&(s.payment_type=F(window,"slideruleData.paymentMethod.gatewayDisplayName","None")),u&&window.slideruleData.analytics.track(u,s),s},ui=async()=>{var e,t;try{(t=(e=window==null?void 0:window.slideruleData)==null?void 0:e.configurationOptions)!=null&&t.usePageUrlsForEvents&&window.location.pathname.includes("/products/")&&(window.slideruleData.pageType="product")}catch(n){$("SlideRule Analytics Tracker: usePageUrlsForEvents failed",n)}try{if(window.slideruleData){const{pageType:n,postPurchaseEvent:r}=window.slideruleData,a=F(window,"Shopify.Checkout.step");return n==="product"?await ci():n==="collection"?await fv():n==="cart"?await pv():n==="confirmation"||n==="purchase"||n==="post-purchase"?await dv(n,r):a?await gv(a):null}console.log("SlideRule Analytics Tracker: SlideRule Data Object is not loaded")}catch(n){console.log("SlideRule Analytics Tracker: track call failed",n)}return null},mv=async e=>{document.addEventListener("customViewItem",function(t){var n,r;$(`custom view item event triggered for ${(n=t==null?void 0:t.detail)==null?void 0:n.handle}`,e),(r=t==null?void 0:t.detail)!=null&&r.handle&&ci(t.detail.handle)})},hv=e=>{var n,r,a,i,o,s;const t={data_source:"klaviyo",company_id:e==null?void 0:e.companyId,form_id:e==null?void 0:e.formId,form_version_id:e==null?void 0:e.formVersionId,form_name:(n=e==null?void 0:e.metaData)==null?void 0:n.$source,type:e==null?void 0:e.type,email:(r=e==null?void 0:e.metaData)==null?void 0:r.$email,phone_number:(a=e==null?void 0:e.metaData)==null?void 0:a.$phone_number,list_id:(i=e==null?void 0:e.metaData)==null?void 0:i.g,consent_method:(o=e==null?void 0:e.metaData)==null?void 0:o.$consent_method,step_name:(s=e==null?void 0:e.metaData)==null?void 0:s.$step_name,klaviyo_meta_data:e==null?void 0:e.metaData};return se(t,ve)},yv=(e,t)=>{const n={open:()=>"form_open",embedOpen:()=>"form_open",close:()=>"form_close",redirectedToUrl:()=>"form_redirect",submit:r=>{var a,i;return((a=r==null?void 0:r.metaData)==null?void 0:a.$email)||((i=r==null?void 0:r.metaData)==null?void 0:i.$phone_number)?"contact_subscribe":"form_submit"},stepSubmit:()=>"form_step_submit",default:r=>je(r)};return n[e](t)||n.default(e)},vv=e=>{window.addEventListener("klaviyoForms",t=>{var n,r,a;try{const i=t.detail.type,o=t.detail,s=yv(i,o),c=hv(o);i==="embedOpen"?c.form_type="embed":i==="open"&&(c.form_type="popup"),i==="submit"&&(((n=o==null?void 0:o.metaData)==null?void 0:n.$email)||((r=o==null?void 0:o.metaData)==null?void 0:r.$phone_number))&&(c.subscribed_via=(a=o==null?void 0:o.metaData)!=null&&a.$email?"email":"phone",window.slideruleData.analytics.identify(se({is_subscribed:!0,email:c.email,phone_number:c.phone_number},ve))),window.slideruleData.analytics.track(s,c)}catch(i){$(`klaviyo form tracking error: ${JSON.stringify(i)}`,e)}})},li=async(e,t,n)=>{var a,i,o,s;$("loading analytics library.",e),window.slideruleData.analytics=nv({app:"sliderule-analytics",version:"1",plugins:t}),$(`analytics library loaded. with plugins ${JSON.stringify(t)}`,e),window.slideruleData.analytics.on("ready",async()=>{$("analytics ready.",e);const c=window.slideruleData.destinations;await rt(c,n.analytics,e)}),vv(e),window.dataLayer=window.dataLayer||[],((i=(a=window==null?void 0:window.slideruleData)==null?void 0:a.configurationOptions)==null?void 0:i.initalizeGA4Manually)||((s=(o=window==null?void 0:window.slideruleData)==null?void 0:o.configurationOptions)==null?void 0:s.skipInitialPageview)?($("skipping initial pageview for ga",!0),window.slideruleData.analytics.page({fired_from:"SlideRule Analytics"},{plugins:{"google-analytics":!1}})):window.slideruleData.analytics.page({fired_from:"SlideRule Analytics"}),await ui(),await uv(e),await ov(e),await mv(e),new av(!0).setCallback(async(c,u)=>{_v(c,u)||(window.slideruleData.analytics.page(),await ui())})};function _v(e,t){const n=i=>{const o=new URL("https://dummy.com"+i),s=new URLSearchParams(o.search);s.delete("pscroll");const c=s.toString();return o.pathname+(c?`?${c}`:"")},r=n(e),a=n(t);return r===a}const st=e=>{if(e=="")return"default";if(e==="yes")return"accepted";if(e==="no")return"declined"},bv=e=>{var t,n,r,a,i;if(e)return{analytics:{enabled:e.analytics,status:st((t=e.current_visitor_consents)==null?void 0:t.analytics)},preferences:{enabled:e.preferences,status:st((n=e.current_visitor_consents)==null?void 0:n.preferences)},marketing:{enabled:e.marketing,status:st((r=e.current_visitor_consents)==null?void 0:r.marketing)},third_party_marketing:{enabled:e.third_party_marketing,status:st((a=e.current_visitor_consents)==null?void 0:a.third_party_marketing)},sale_of_data:{enabled:e.sale_of_data,status:st((i=e.current_visitor_consents)==null?void 0:i.sale_of_data)},should_show_banner:e.should_show_banner}},wv=async e=>new Promise((t,n)=>{window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],r=>{if(r){n(r);return}const a=window.Shopify.customerPrivacy,i={analytics:a.analyticsProcessingAllowed(),preferences:a.preferencesProcessingAllowed(),marketing:a.firstPartyMarketingAllowed(),third_party_marketing:a.thirdPartyMarketingAllowed(),sale_of_data:a.saleOfDataRegion(),should_show_banner:a.shouldShowBanner(),current_visitor_consents:a.currentVisitorConsent()};$(`Shopify Customer Privacy API response loaded: ${JSON.stringify(i)}`,e),t(i)})}),di=async e=>{var t;if((window==null?void 0:window.Shopify)&&((t=window==null?void 0:window.Shopify)==null?void 0:t.loadFeatures)){const n=await wv(e),r=bv(n);return{analytics:r.analytics,marketing:r.marketing}}else return $("No customer privacy API data found. Assuming consent",e),{analytics:{enabled:!0,status:"default"},marketing:{enabled:!0,status:"default"}}},$v=async(e,t,n,r)=>{$(`${e} event fired. Rechecking consent status`,r),t=await di(r),$(`updated consents ${JSON.stringify(t)}. firedInitialPageview=${n} `,r);const{destinations:a,initPlugins:i}=window.slideruleData;return t.analytics.enabled?(await li(r,i,t),n=!0,await window.slideruleData.analytics.plugins.enable(["google-analytics"])):window.slideruleData.analytics&&(await window.slideruleData.analytics.plugins.disable(["google-analytics"]),$("analytics consent removed. updating identifiers consents",r),await rt(a,t.analytics.enabled,r)),n},Sv=async e=>{let t=await di(e),n=t.analytics.enabled;return $(`initial consents load ${JSON.stringify(t)}`,e),document.addEventListener("visitorConsentCollected",async()=>{n=await $v("visitorConsentCollected",t,n,e)}),t},Iv={name:"logger",page:({payload:e})=>{console.log("SlideRule Analytics: page",e)},track:({payload:e})=>{console.log("SlideRule Analytics: track",e)},identify:({payload:e})=>{console.log("SlideRule Analytics: identify",e)},reset:()=>{console.log("SlideRule Analytics: reset")},methods:{group:(e,t,n,r)=>{console.log("SlideRule Analytics: group",e,t,n,r)}}};let Rt=!1,Z=!1;const fi=(...e)=>{!Z||console.info(...["[react-facebook-pixel]"].concat(e))},H=(...e)=>{!Z||console.info(...["[react-facebook-pixel]"].concat(e))},oe=()=>(Rt||fi("Pixel not initialized before using call ReactPixel.init with required params"),Rt),xv={autoConfig:!0,debug:!1};var Cn={init(e,t={},n=xv){Rt=typeof window!="undefined"&&!!window.fbq,function(r,a,i,o,s,c,u){r.fbq||(s=r.fbq=function(){s.callMethod?s.callMethod.apply(s,arguments):s.queue.push(arguments)},r._fbq||(r._fbq=s),s.push=s,s.loaded=!0,s.version="2.0",s.queue=[],c=a.createElement(i),c.async=!0,c.src=o,u=a.getElementsByTagName(i)[0],u.parentNode.insertBefore(c,u))}(window,document,"script","https://connect.facebook.net/en_US/fbevents.js"),e?(n.autoConfig===!1&&fbq("set","autoConfig",!1,e),fbq("init",e,t),Rt=!0,Z=n.debug):fi("Please insert pixel id for initializing")},pageView(){!oe()||(fbq("track","PageView"),Z&&H("called fbq('track', 'PageView');"))},pageViewSingle(e){!oe()||(fbq("trackSingle",e,"PageView"),Z&&H("called fbq('trackSingle', 'PageView');"))},track(e,t,n){!oe()||(n?fbq("track",e,t,{eventID:n}):fbq("track",e,t),Z&&(H(`called fbq('track', '${e}');`),t&&H("with data",t)))},trackSingle(e,t,n,r){!oe()||(r?fbq("trackSingle",e,t,n,{eventID:r}):fbq("trackSingle",e,t,n),Z&&(H(`called fbq('trackSingle', '${e}', '${t}');`),n&&H("with data",n)))},trackCustom(e,t){!oe()||(fbq("trackCustom",e,t),Z&&(H(`called fbq('trackCustom', '${e}');`),t&&H("with data",t)))},trackSingleCustom(e,t,n){!oe()||(fbq("trackSingle",e,t,n),Z&&(H(`called fbq('trackSingleCustom', '${e}', '${t}');`),n&&H("with data",n)))},grantConsent(){!oe()||(fbq("consent","grant"),Z&&H("called fbq('consent', 'grant');"))},revokeConsent(){!oe()||(fbq("consent","revoke"),Z&&H("called fbq('consent', 'revoke');"))},fbq(...e){!oe()||(fbq(...e),Z&&(H(`called fbq('${e.slice(0,2).join("', '")}')`),e[2]&&H("with data",e[2])))}};const Ov={pixelIds:[],advancedMatching:null,autoConfig:!0,debug:!1,sendUserIdOrAnonymousIdAsExternalId:!1};let pi=!1;function Av(e={}){return{name:"meta-pixel",config:{...Ov,...e},initialize:async t=>{const{config:n}=t,{pixelIds:r,advancedMatching:a,autoConfig:i,debug:o,sendUserIdOrAnonymousIdAsExternalId:s}=n,c={autoConfig:i,debug:o},u=t.instance.user(),{userId:g,anonymousId:f}=u,d=u.traits?u.traits:{},{phone:m,email:v,firstName:y,lastName:_}=d,w={external_id:s?g||f:null,em:v,fn:y,ln:_,ph:m,ct:F(d,"address.city"),st:F(d,"address.province"),zp:F(d,"address.postalCode"),country:F(d,"address.country")},S=se({...w,...a},ve),h=Object.keys(S).length===0&&S.constructor===Object?null:S;r.forEach(O=>{Cn.init(O,h,c)}),pi=!0},page:t=>{const{config:{pixelIds:n}}=t;n.forEach(r=>{Cn.pageViewSingle(r)})},track:t=>{const{config:{pixelIds:n},payload:r}=t,a=F(r,"properties.event_id");let i=Object.assign({},r.properties,{});delete i.event_id,n.forEach(o=>{Cn.trackSingle(o,r.event,i,a)})},loaded:()=>pi}}var Pv=hr,Cv=xr,kv=Zt,Tv=te,Ev=Ee,Dv=et.exports,Nv=nn,Mv=tn,Lv="[object Map]",jv="[object Set]",Rv=Object.prototype,Uv=Rv.hasOwnProperty;function qv(e){if(e==null)return!0;if(Ev(e)&&(Tv(e)||typeof e=="string"||typeof e.splice=="function"||Dv(e)||Mv(e)||kv(e)))return!e.length;var t=Cv(e);if(t==Lv||t==jv)return!e.size;if(Nv(e))return!Pv(e).length;for(var n in e)if(Uv.call(e,n))return!1;return!0}var Fv=qv,zv=Ee;function Gv(e,t){return function(n,r){if(n==null)return n;if(!zv(n))return e(n,r);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&r(o[i],i,o)!==!1;);return n}}var Bv=Gv,Kv=Gm,Hv=Bv,Vv=Hv(Kv),Wv=Vv,Jv=Wv,Xv=Ee;function Zv(e,t){var n=-1,r=Xv(e)?Array(e.length):[];return Jv(e,function(a,i,o){r[++n]=t(a,i,o)}),r}var Yv=Zv,Qv=fn,e_=Me,t_=Yv,n_=te;function r_(e,t){var n=n_(e)?Qv:t_;return n(e,e_(t))}var gi=r_;function a_(e,t){for(var n,r=-1,a=e.length;++r<a;){var i=t(e[r]);i!==void 0&&(n=n===void 0?i:n+i)}return n}var i_=a_,o_=Me,s_=i_;function c_(e,t){return e&&e.length?s_(e,o_(t)):0}var u_=c_;function l_(e){return e!==e}var d_=l_;function f_(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var p_=f_,g_=Gr,m_=d_,h_=p_;function y_(e,t,n){return t===t?h_(e,t,n):g_(e,m_,n)}var v_=y_,__=v_;function b_(e,t){var n=e==null?0:e.length;return!!n&&__(e,t,0)>-1}var w_=b_;function $_(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var S_=$_;function I_(){}var x_=I_,kn=vr,O_=x_,A_=Jt,P_=1/0,C_=kn&&1/A_(new kn([,-0]))[1]==P_?function(e){return new kn(e)}:O_,k_=C_,T_=Qn,E_=w_,D_=S_,N_=er,M_=k_,L_=Jt,j_=200;function R_(e,t,n){var r=-1,a=E_,i=e.length,o=!0,s=[],c=s;if(n)o=!1,a=D_;else if(i>=j_){var u=t?null:M_(e);if(u)return L_(u);o=!1,a=N_,c=new T_}else c=t?[]:s;e:for(;++r<i;){var g=e[r],f=t?t(g):g;if(g=n||g!==0?g:0,o&&f===f){for(var d=c.length;d--;)if(c[d]===f)continue e;t&&c.push(f),s.push(g)}else a(c,f,n)||(c!==s&&c.push(f),s.push(g))}return s}var U_=R_,q_=U_;function F_(e){return e&&e.length?q_(e):[]}var z_=F_;const G_=e=>{if(e){const t=F(e,"item_name"),n=F(e,"item_variant");return t&&n?`${t} - ${n}`:t}},B_=e=>te(e)?Fv(e):ve(e),K_=async e=>{const{event:t,properties:n}=e;return se({content_type:"product_group",content_ids:n.items?z_(gi(n.items,"item_product_id")):void 0,value:n.value,content_name:(()=>{if((t==="view_item"||t==="add_to_cart")&&n.items)return G_(n.items[0])})(),currency:n.currency,content_category:F(n,"items[0].item_category"),num_items:(()=>{if(!(t==="view_item"||!n.items))return u_(n.items,"quantity")})(),order_id:n.transaction_id,event_id:await(async()=>{if(t==="purchase")return n.transaction_id;if(t==="add_to_cart"&&n.cart_token)return await Re(`_sra_event_id-${n.cart_token}-${n.items[0].item_id}`)})(),contents:(()=>{if(!(t==="view_item"||!n.items))return n.items?gi(n.items,r=>({id:r.item_product_id,quantity:r.quantity,item_price:r.price})):void 0})()},B_)},H_=e=>{const{event:t}=e,n={view_item_list:r=>!1,contact_subscribe:r=>"Lead",view_item:r=>"ViewContent",add_to_cart:r=>"AddToCart",view_cart:r=>!1,purchase:r=>!1,default:r=>!1};return(n[t]||n.default)(e)},V_=async e=>{const t=H_(e);if(t===!1)return{eventName:null,properties:null};const n=await K_(e);return{eventName:t,properties:n}},mi={name:"format-meta-pixel","track:meta-pixel":async({payload:e,plugins:t})=>{const{eventName:n,properties:r}=await V_(e);return{event:n,properties:r}}},W_=()=>{const e="_sra_debug";let t=Ne(window.location.href).debug,n=Ue(e),r=!1;return t==="false"?Vm(e):t==="true"||n==="true"?($("debug parameter found. debug mode in enabled.",!0),kt(e,"true",1),r=!0):(window.slideruleData.themeMode==="design"||window.slideruleData.themeMode==="preview")&&($("previewing theme. debug mode in enabled.",!0),r=!0),r},hi=async()=>{var m,v,y,_,w,S,k,h,O,R;const e=W_(),t=!1;$("starting main function.",e),window.slideruleData||(window.slideruleData={},window.slideruleData.destinations={});const n=(m=window==null?void 0:window.slideruleData)==null?void 0:m.customer,a=((y=(v=window.slideruleData)==null?void 0:v.shopifyLiquidData)==null?void 0:y.customer)||n,{id:i,address:o}=a||{};window.slideruleData.configurationOptions=ih(),$(`loading configuration options: ${JSON.stringify((_=window==null?void 0:window.slideruleData)==null?void 0:_.configurationOptions)}`,e);const{destinations:{google_analytics_4:s,google_tag_manager:c,meta_pixel:u,rakuten:g}}=window.slideruleData;let f={analytics:{enabled:!0}};(S=(w=window==null?void 0:window.slideruleData)==null?void 0:w.configurationOptions)!=null&&S.consentManagement&&(f=await Sv(e));const d=e||t?[Oa,mi,_a,Iv]:[Oa,mi,_a];if(s&&($("adding google analytics 4 plugin to libraries.",e),d.push(nh({measurementIds:s.measurementIds,sendPageView:!1,debug:e,gtagName:"gtag",parametersToStrip:ah,initalizedManually:((h=(k=window==null?void 0:window.slideruleData)==null?void 0:k.configurationOptions)==null?void 0:h.initalizeGA4Manually)||!1}))),c){$("adding google tag manager plugin to libraries.",e);const{containerIds:E}=c,L=[];for(let q=0;q<E.length;q++){const U=E[q],K=q===0?ba({containerId:U}):Object.assign({},ba({containerId:U}),{name:"google-tag-manager-two"});L.push(K)}d.push(...L)}if(u){$("adding meta pixel plugin to libraries.",e);const{pixelIds:E}=u,L=se({external_id:i,em:a==null?void 0:a.email,fn:a==null?void 0:a.firstName,ln:a==null?void 0:a.lastName,ph:a==null?void 0:a.phone,ct:o==null?void 0:o.province,st:o==null?void 0:o.state,zp:o==null?void 0:o.zip,country:o==null?void 0:o.country},ve);d.push(Av({pixelIds:E,sendUserIdOrAnonymousIdAsExternalId:!0,advancedMatching:L}))}g&&$("rakuten destination enabled. No pixel needed",e),window.slideruleData.initPlugins=d,f.analytics.enabled?(await li(e,d,f),(R=(O=window==null?void 0:window.slideruleData)==null?void 0:O.configurationOptions)!=null&&R.dataActionTracking&&window.addEventListener("load",()=>{eh()})):($("consent not granted. waiting for consent to load tracking libraries",e),await rt(window.slideruleData.destinations,f.analytics.enabled,e))};document.readyState!=="loading"?hi():document.addEventListener("DOMContentLoaded",function(){hi()})})();
